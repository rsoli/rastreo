"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[1286],{1286:(S,d,n)=>{n.r(d),n.d(d,{ChoferModule:()=>_});var m=n(6895),c=n(7046);let u=(()=>{class t{constructor(){this.id_chofer=0,this.nombre="",this.apellido_paterno="",this.apellido_materno="",this.categoria_licencia="",this.numero_licencia="",this.id_personas=[]}static initialize(e){this.ComboPersona(e)}static ComboPersona(e){e.getAll("persona/lista_persona").subscribe({next:r=>{const a=(r.personas||[]).map(l=>({label:l.nombre+" "+l.apellido_paterno+" "+l.apellido_materno,value:l.id_persona})),h=t.columns.find(l=>"id_personas"===l.field);h&&(h.options=a)},error:r=>{console.error("Error cargando opciones de personas",r)}})}}return t.primaryKey="id_chofer",t.columns=[{field:"id_chofer",header:"ID",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"nombre",header:"Nombre",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"apellido_paterno",header:"Apellido Paterno",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"apellido_materno",header:"Apellido Materno",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"categoria_licencia",header:"Categor\xeda Licencia",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"numero_licencia",header:"N\xfamero de licencia",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"id_personas",header:"Personas",visibleTable:!0,visibleForm:!0,inputType:"select",required:!1,options:[],multiple:!1},{field:"descripcion",header:"Descripci\xf3n",visibleTable:!0,visibleForm:!0,inputType:"textarea",required:!1},{field:"contrase\xf1a",header:"Contrase\xf1a",visibleTable:!0,visibleForm:!0,inputType:"password",required:!1},{field:"Sexo",header:"Sexo",visibleTable:!0,visibleForm:!0,inputType:"checkbox",required:!1},{field:"geocerca",header:"Geocerca",visibleTable:!0,visibleForm:!0,inputType:"map",required:!1},{field:"fecha_nacimiento",header:"Fecha de nacimiento",visibleTable:!0,visibleForm:!0,inputType:"date",required:!1},{field:"feriado",header:"Feriado",visibleTable:!0,visibleForm:!0,inputType:"datetime",required:!1},{field:"hora",header:"Hora inicio",visibleTable:!0,visibleForm:!0,inputType:"time",required:!1}],t})();var p=n(805),i=n(1571),f=n(6253),b=n(3617),v=n(2453),C=n(1023);let g=(()=>{class t{constructor(e,r){this.messageService=e,this.apiService=r,this.lista_choferes=[],this.loading=!1,this.columnas_chofer=u.columns,this.primaryKeyChofer=u.primaryKey,this.toolbarButtons=new Array}ngOnInit(){this.ListarChoferes(),u.initialize(this.apiService),this.AgregarBotones()}ListarChoferes(){this.loading=!0,this.apiService.getAll("chofer/lista_chofer").subscribe({next:e=>{this.lista_choferes=JSON.parse(JSON.stringify(e)).lista_chofer},error:e=>{console.log(e)},complete:()=>{this.loading=!1}})}guardarChofer(e){this.loading=!0,this.apiService.create("chofer/post_chofer",e).subscribe({next:r=>{var o;const a=null===(o=r?.mensaje)||void 0===o?void 0:o[0];a?this.MensajeError(a):this.ListarChoferes()},error:r=>{this.MensajeError("Verifique su conexi\xf3n a internet"),console.log(r)},complete:()=>{this.loading=!1}})}eliminarChofer(e){e.id_chofer&&(this.loading=!0,this.apiService.delete("chofer/eliminar_chofer",e.id_chofer).subscribe({next:()=>{this.ListarChoferes()},error:r=>{console.log("Error al eliminar:",r),this.MensajeError("Error al eliminar")},complete:()=>{this.loading=!1}}))}seleccionarChofer(e){this.setButtonEnabled("export",!1),this.setButtonEnabled("print",!1),this.messageService.clear(),this.MensajeInfo(e.nombre+" "+e.apellido_paterno+" "+e.apellido_materno,!0)}deshacerSeleccionChofer(e){this.setButtonEnabled("export",!0),this.setButtonEnabled("print",!0)}AgregarBotones(){this.toolbarButtons.push({name:"export",label:"Exportar PDF",action:"onExport",icon:"pi pi-file-export",disabled:!0,class:"p-button-rounded p-button-warning mr-2"}),this.toolbarButtons.push({name:"print",label:"Imprimir",action:"onPrint",icon:"pi pi-print",disabled:!0,class:"p-button-rounded p-button-warning mr-2"})}setButtonEnabled(e,r){this.toolbarButtons.forEach(o=>{o.name===e&&(o.disabled=r)})}handleButtonClick(e){const{action:r,rowData:o}=e;switch(r){case"onExport":case"onPrint":console.log("ll ",r,o);break;default:console.error("Acci\xf3n no soportada")}}MensajeError(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}handleButtonAction(e,r){console.log("llego botones",e,r)}MensajeSucces(e){this.messageService.add({severity:"success",summary:"Exito",detail:e})}MensajeInfo(e,r){this.messageService.add(1==r?{severity:"info",summary:"Seleccionado",detail:e}:{severity:"info",summary:"Informaci\xf3n",detail:e})}MensajeAdvertencia(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(p.ez),i.Y36(f.s))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-chofer"]],features:[i._Bn([p.ez])],decls:4,vars:10,consts:[[1,"card"],[3,"loading"],["titleTable","Lista de choferes",3,"filterTable","paginator","toolbar","buttonNew","buttonEdit","buttonDelete","buttons","columns","data","selected","Unselect","buttonClick","formSave","delete"]],template:function(e,r){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"p-toast")(2,"app-loading",1),i.TgZ(3,"app-tabla-dinamica",2),i.NdJ("selected",function(a){return r.seleccionarChofer(a)})("Unselect",function(a){return r.deshacerSeleccionChofer(a)})("buttonClick",function(a){return r.handleButtonClick(a)})("formSave",function(a){return r.guardarChofer(a)})("delete",function(a){return r.eliminarChofer(a)}),i.qZA()()),2&e&&(i.xp6(2),i.Q6J("loading",r.loading),i.xp6(1),i.Q6J("filterTable",!1)("paginator",!0)("toolbar",!0)("buttonNew",!0)("buttonEdit",!0)("buttonDelete",!0)("buttons",r.toolbarButtons)("columns",r.columnas_chofer)("data",r.lista_choferes))},dependencies:[b.N,v.FN,C.C]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[c.Bz.forChild([{path:"",component:g}]),c.Bz]}),t})();var T=n(1511);let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[m.ez,y,T.m]}),t})()}}]);