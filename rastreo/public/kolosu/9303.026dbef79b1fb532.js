"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[9303],{9303:(T,d,i)=>{i.r(d),i.d(d,{PersonaModule:()=>M});var m=i(6895),u=i(433),l=i(7046);let p=(()=>{class r{constructor(){this.id_persona=0,this.nombre="",this.apellido_paterno="",this.apellido_materno="",this.celular="",this.telefono="",this.ci=""}}return r.primaryKey="id_persona",r.columns=[{field:"id_persona",header:"ID",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"nombre",header:"Nombre",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"apellido_paterno",header:"Apellido Paterno",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"apellido_materno",header:"Apellido Materno",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"ci",header:"CI",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"celular",header:"Celular",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"telefono",header:"Tel\xe9fono",visibleTable:!0,visibleForm:!0,inputType:"text",required:!1}],r})();var c=i(805),t=i(1571),h=i(6253),f=i(3617),g=i(2453),v=i(1023);let b=(()=>{class r{constructor(e,o){this.apiService=e,this.messageService=o,this.lista_personas=[],this.loading=!1,this.columnas_persona=p.columns,this.es_admin=!1}ngOnInit(){this.ListarPersonas(),this.verSession()}verSession(){this.es_admin=1!=JSON.parse(localStorage.getItem("accesos")||"{}").sesion}ListarPersonas(){this.loading=!0,this.apiService.getAll("persona/lista_persona").subscribe({next:e=>{console.log(e),this.lista_personas=JSON.parse(JSON.stringify(e)).personas},error:e=>{console.log(e)},complete:()=>{this.loading=!1}})}eliminarPersona(e){e.id_persona&&(this.loading=!0,this.apiService.delete("persona/eliminar_persona",e.id_persona).subscribe({next:()=>{this.ListarPersonas()},error:o=>{console.log("Error al eliminar:",o),this.MensajeError("Error al eliminar")},complete:()=>{this.loading=!1}}))}guardarPersona(e){this.loading=!0,this.apiService.create("persona/post_persona",e).subscribe({next:o=>{var s;const n=null===(s=o?.mensaje)||void 0===s?void 0:s[0];n?this.MensajeError(n):this.ListarPersonas()},error:o=>{this.MensajeError("Verifique su conexi\xf3n a internet"),console.log(o)},complete:()=>{this.loading=!1}})}seleccionarPersona(e){this.messageService.clear(),this.MensajeInfo(e.nombre+" "+e.apellido_paterno+" "+e.apellido_materno,!0)}MensajeError(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}MensajeSucces(e){this.messageService.add({severity:"success",summary:"Exito",detail:e})}MensajeInfo(e,o){this.messageService.add(1==o?{severity:"info",summary:"Seleccionado",detail:e}:{severity:"info",summary:"Informaci\xf3n",detail:e})}MensajeAdvertencia(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.s),t.Y36(c.ez))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-persona"]],features:[t._Bn([c.ez])],decls:4,vars:7,consts:[[1,"card"],[3,"loading"],["titleTable","Lista de personas",3,"data","buttonNew","buttonEdit","buttonDelete","toolbar","columns","formSave","delete","selected"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast")(2,"app-loading",1),t.TgZ(3,"app-tabla-dinamica",2),t.NdJ("formSave",function(n){return o.guardarPersona(n)})("delete",function(n){return o.eliminarPersona(n)})("selected",function(n){return o.seleccionarPersona(n)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("loading",o.loading),t.xp6(1),t.Q6J("data",o.lista_personas)("buttonNew",o.es_admin)("buttonEdit",o.es_admin)("buttonDelete",o.es_admin)("toolbar",o.es_admin)("columns",o.columnas_persona))},dependencies:[f.N,g.FN,v.C],styles:['[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}.loading-indicator[_ngcontent-%COMP%]{position:fixed;z-index:999;height:2em;width:2em;overflow:show;margin:auto;inset:0}.loading-indicator[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000096}.loading-text[_ngcontent-%COMP%]{color:#000!important}.loading-border[_ngcontent-%COMP%]{background-color:#fff;width:310px;height:150px;z-index:998;padding:20px;border-radius:5px;border:0}']}),r})(),y=(()=>{class r{constructor(e){this.router=e}canActivate(e,o){return null!==localStorage.getItem("accesos")?(console.log("Sesion logueada"),!0):(this.router.navigate(["/public/inicio"]),console.log("Redirigido a la p\xe1gina de inicio"),!1)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(l.F0))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),P=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.Bz.forChild([{path:"",component:b,canActivate:[y]}]),l.Bz]}),r})();var S=i(1511);let M=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[m.ez,P,u.u5,u.UX,S.m]}),r})()}}]);