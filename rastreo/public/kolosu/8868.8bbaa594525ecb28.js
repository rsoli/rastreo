"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[8868],{8868:(_,d,s)=>{s.r(d),s.d(d,{RolComponentModule:()=>S});var f=s(6895),m=s(7046),u=s(805);let p=(()=>{class i{constructor(){this.id_rol=0,this.nombre_rol="",this.fecha_reg="",this.fecha_mod=""}static initialize(e){this.ComboPermisos(e)}static ComboPermisos(e){e.getAll("rol/lista_permisos").subscribe({next:o=>{const t=(JSON.parse(JSON.stringify(o)).roles||[]).map(n=>({label:n.label,value:n.value,children:n.children||[]})),c=i.columns.find(n=>"id_permisos"===n.field);c&&(c.options=t)},error:o=>{console.error("Error cargando opciones de permisos",o)}})}}return i.columns=[{field:"id_rol",header:"ID",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"nombre_rol",header:"Rol",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"fecha_reg",header:"Fecha reg",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"fecha_mod",header:"Fecha mod",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"id_permisos",header:"Accesos",visibleTable:!1,visibleForm:!0,inputType:"treeSelect",required:!1,options:[]}],i})();var l=s(1571),h=s(6253),b=s(3617),v=s(2453),g=s(1023);const R=[{path:"",component:(()=>{class i{constructor(e,o,r){this.apiService=e,this.messageService=o,this.router=r,this.loading=!1,this.lista_rol=[],this.columnas_rol=p.columns,this.toolbarButtons=new Array}ngOnInit(){this.ListarRol(),p.initialize(this.apiService)}ListarRol(){this.loading=!0,this.apiService.getAll("rol/lista_roles").subscribe({next:e=>{this.lista_rol=JSON.parse(JSON.stringify(e)).roles},error:e=>{this.MensajeError("Error al obtener la lista")},complete:()=>{this.loading=!1}})}guardarRol(e){this.loading=!0;const o=e.id_permisos.map(t=>({key:t.key,label:t.label})),r=Object.assign(Object.assign({},e),{id_permisos:o});this.apiService.create("rol/post_roles_admin",r).subscribe({next:t=>{var c;const n=null===(c=t?.mensaje)||void 0===c?void 0:c[0];n?this.MensajeError(n):this.ListarRol()},error:t=>{console.log(t),this.MensajeError("Verifique su conexi\xf3n a internet")},complete:()=>{this.loading=!1}})}eliminarRol(e){e.id_rol&&(this.loading=!0,this.apiService.delete("rol/eliminar_rol",e.id_rol).subscribe({next:()=>{this.ListarRol()},error:o=>{this.MensajeError("Error al eliminar")},complete:()=>{this.loading=!1}}))}seleccionarRol(e){this.messageService.clear(),this.MensajeInfo(e.nombre_rol+"",!0)}deshacerSeleccionRol(e){}ButtonClick(e){const{action:o}=e;"onPruba1"===o||"onPruba2"===o||console.error("Acci\ufffdn no soportada")}MensajeError(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}MensajeSucces(e){this.messageService.add({severity:"success",summary:"\ufffdxito",detail:e})}MensajeInfo(e,o){this.messageService.add(1==o?{severity:"info",summary:"Seleccionado",detail:e}:{severity:"info",summary:"Informaci\ufffdn",detail:e})}ButtonEnabled(e,o){this.toolbarButtons.forEach(r=>{r.name===e&&(r.disabled=o)})}}return i.\u0275fac=function(e){return new(e||i)(l.Y36(h.s),l.Y36(u.ez),l.Y36(m.F0))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-rol"]],features:[l._Bn([u.ez])],decls:4,vars:4,consts:[[1,"card"],[3,"loading"],["titleTable","Lista de roles",3,"buttons","columns","data","selected","buttonClick","Unselect","formSave","delete"]],template:function(e,o){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"p-toast")(2,"app-loading",1),l.TgZ(3,"app-tabla-dinamica",2),l.NdJ("selected",function(t){return o.seleccionarRol(t)})("buttonClick",function(t){return o.ButtonClick(t)})("Unselect",function(t){return o.deshacerSeleccionRol(t)})("formSave",function(t){return o.guardarRol(t)})("delete",function(t){return o.eliminarRol(t)}),l.qZA()()),2&e&&(l.xp6(2),l.Q6J("loading",o.loading),l.xp6(1),l.Q6J("buttons",o.toolbarButtons)("columns",o.columnas_rol)("data",o.lista_rol))},dependencies:[b.N,v.FN,g.C]}),i})()}];let C=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[m.Bz.forChild(R),m.Bz]}),i})();var y=s(1511);let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[f.ez,C,y.m]}),i})()}}]);