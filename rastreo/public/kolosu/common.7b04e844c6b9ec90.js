"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[8592],{740:(k,v,r)=>{r.d(v,{I:()=>e});let e=(()=>{class c{constructor(){this.id_usuario=0,this.usuario="",this.correo="",this.fecha_reg="",this.fecha_mod="",this.foto="",this.id_persona={value:0,label:""},this.persona="",this.id_roles=[],this.roles="",this.contrasena="",this.email="",this.password=""}static initialize(p){this.ComboPersona(p),this.ComboRoles(p)}static ComboRoles(p){p.getAll("rol/lista_rol").subscribe({next:a=>{const s=(a.roles||[]).map(d=>({label:d.nombre_rol,value:d.id_rol})),i=c.columns.find(d=>"id_roles"===d.field);i&&(i.options=s)},error:a=>{console.error("Error cargando opciones de roles",a)}})}static ComboPersona(p){p.getAll("persona/lista_persona").subscribe({next:a=>{const s=(a.personas||[]).map(d=>({label:d.nombre+" "+d.apellido_paterno+" "+d.apellido_materno,value:d.id_persona})),i=c.columns.find(d=>"id_persona"===d.field);i&&(i.options=s)},error:a=>{console.error("Error cargando opciones de personas",a)}})}}return c.columns=[{field:"id_usuario",header:"ID",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"usuario",header:"Usuario",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"contrasena",header:"Contrase\xf1a",visibleTable:!1,visibleForm:!0,inputType:"password",required:!1},{field:"persona",header:"Persona",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"id_persona",header:"Persona",visibleTable:!1,visibleForm:!0,inputType:"select",required:!0,options:[],multiple:!1},{field:"correo",header:"Correo",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"id_roles",header:"Roles",visibleTable:!1,visibleForm:!0,inputType:"select",required:!0,options:[],multiple:!0},{field:"roles",header:"Roles",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1}],c.columns_password=[{field:"id_usuario",header:"ID",visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"correo",header:"Correo",visibleForm:!0,inputType:"text",required:!1,disabled:!0},{field:"contrasena",header:"Nueva contrase\xf1a",visibleForm:!0,inputType:"password",required:!0},{field:"repetir_contrasena",header:"Repetir contrase\xf1a",visibleForm:!0,inputType:"password",required:!0}],c})()},8631:(k,v,r)=>{r.d(v,{u:()=>f});var e=r(529),c=r(1571);let f=(()=>{class p{constructor(o){this.http=o,this.apiUrl="https://www.kolosu.com/traccar/api"}post_iniciar_sesion(o){let s=(new e.WM).set("Accept","application/json");return this.http.get("https://www.kolosu.com/traccar/api/session?token="+o,{headers:s,observe:"response",withCredentials:!0})}get_motorizado(o){let s=(new e.WM).set("content-type","application/json");return this.http.get("https://www.kolosu.com/traccar/api/devices",{headers:s,withCredentials:!0})}get_viajes(o,s,i){let d=(new e.WM).set("content-type","application/json");return this.http.get("https://www.kolosu.com/traccar/api/reports/trips?deviceId="+o+"&from="+s+"&to="+i,{headers:d,withCredentials:!0})}get_rutas(o,s,i){let d=(new e.WM).set("content-type","application/json");return this.http.get("https://www.kolosu.com/traccar/api/reports/route?deviceId="+o+"&from="+s+"&to="+i,{headers:d,withCredentials:!0})}get_parqueo(o,s,i){let d=(new e.WM).set("content-type","application/json");return this.http.get("https://www.kolosu.com/traccar/api/reports/stops?deviceId="+o+"&from="+s+"&to="+i,{headers:d,withCredentials:!0})}enviarComandoPersonalizado(o,s){return this.http.post(`${this.apiUrl}/commands/send`,{deviceId:o,type:"custom",description:"Nuevo...",attributes:{data:s},id:0,textChannel:!1},{withCredentials:!0})}conection(o){let s=new WebSocket("wss://www.kolosu.com/traccar/api/socket?token="+o);s.onopen=function(i){console.log("cnexion establecida ")},s.onmessage=function(i){console.log("dato recibido ",JSON.parse(i.data))},s.onclose=function(i){i.wasClean?alert(`[close] Connection closed cleanly, code=${i.code} reason=${i.reason}`):alert("[close] Connection died")},s.onerror=function(i){alert("[error]")}}loadVehicles(){return this.http.get("https://www.kolosu.com/traccar/api/devices",{withCredentials:!0})}}return p.\u0275fac=function(o){return new(o||p)(c.LFG(e.eN))},p.\u0275prov=c.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},7445:(k,v,r)=>{r.d(v,{F:()=>f});var e=r(4986),c=r(5963);function f(p=0,a=e.z){return p<0&&(p=0),(0,c.H)(p,p,a)}},2722:(k,v,r)=>{r.d(v,{R:()=>a});var e=r(4482),c=r(5403),f=r(8421),p=r(5032);function a(o){return(0,e.e)((s,i)=>{(0,f.Xf)(o).subscribe((0,c.x)(i,()=>i.complete(),p.Z)),!i.closed&&s.subscribe(i)})}},5108:(k,v,r)=>{r.d(v,{i:()=>p,x:()=>a});var e=r(1571),c=r(6895);const f=["*"];let p=(()=>{class o{constructor(){this.layout="horizontal",this.type="solid"}containerClass(){return{"p-divider p-component":!0,"p-divider-horizontal":"horizontal"===this.layout,"p-divider-vertical":"vertical"===this.layout,"p-divider-solid":"solid"===this.type,"p-divider-dashed":"dashed"===this.type,"p-divider-dotted":"dotted"===this.type,"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align),"p-divider-center":"horizontal"===this.layout&&"center"===this.align||"vertical"===this.layout&&(!this.align||"center"===this.align),"p-divider-right":"horizontal"===this.layout&&"right"===this.align,"p-divider-top":"vertical"===this.layout&&"top"===this.align,"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["p-divider"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",layout:"layout",type:"type",align:"align"},ngContentSelectors:f,decls:3,vars:4,consts:[["role","separator",3,"ngClass","ngStyle"],[1,"p-divider-content"]],template:function(i,d){1&i&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA()()),2&i&&(e.Tol(d.styleClass),e.Q6J("ngClass",d.containerClass())("ngStyle",d.style))},dependencies:[c.mk,c.PC],styles:['.p-divider-horizontal{display:flex;width:100%;position:relative;align-items:center}.p-divider-horizontal:before{position:absolute;display:block;top:50%;left:0;width:100%;content:""}.p-divider-horizontal.p-divider-left{justify-content:flex-start}.p-divider-horizontal.p-divider-right{justify-content:flex-end}.p-divider-horizontal.p-divider-center{justify-content:center}.p-divider-content{z-index:1}.p-divider-vertical{min-height:100%;margin:0 1rem;display:flex;position:relative;justify-content:center}.p-divider-vertical:before{position:absolute;display:block;top:0;left:50%;height:100%;content:""}.p-divider-vertical.p-divider-top{align-items:flex-start}.p-divider-vertical.p-divider-center{align-items:center}.p-divider-vertical.p-divider-bottom{align-items:flex-end}.p-divider-solid.p-divider-horizontal:before{border-top-style:solid}.p-divider-solid.p-divider-vertical:before{border-left-style:solid}.p-divider-dashed.p-divider-horizontal:before{border-top-style:dashed}.p-divider-dashed.p-divider-vertical:before{border-left-style:dashed}.p-divider-dotted.p-divider-horizontal:before{border-top-style:dotted}.p-divider-dotted.p-divider-horizontal:before{border-left-style:dotted}\n'],encapsulation:2,changeDetection:0}),o})(),a=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez]}),o})()},9764:(k,v,r)=>{r.d(v,{Q:()=>A,s:()=>I});var e=r(1571),c=r(6895),f=r(805),p=r(1795),a=r(7340);function o(n,g){if(1&n&&(e.TgZ(0,"span",10),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.uIk("id",t.id+"_header"),e.xp6(1),e.Oqu(t.header)}}function s(n,g){1&n&&e.GkF(0)}function i(n,g){}function d(n,g){1&n&&e.YNc(0,i,0,0,"ng-template")}function b(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(P){e.CHM(t);const y=e.oxw(2);return e.KtG(y.onIconClick(P))})("keydown.enter",function(P){e.CHM(t);const y=e.oxw(2);return e.KtG(y.onIconClick(P))}),e._UZ(1,"span"),e.qZA()}if(2&n){const t=e.oxw(2);e.uIk("aria-label","collapse button")("id",t.id+"-label")("aria-controls",t.id+"-content")("aria-expanded",!t.collapsed),e.xp6(1),e.Tol(t.collapsed?t.expandIcon:t.collapseIcon)}}const C=function(n,g,t){return{"p-panel-icons-start":n,"p-panel-icons-end":g,"p-panel-icons-center":t}};function M(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(P){e.CHM(t);const y=e.oxw();return e.KtG(y.onHeaderClick(P))}),e.YNc(1,o,2,2,"span",7),e.Hsn(2,1),e.YNc(3,s,1,0,"ng-container",4),e.TgZ(4,"div",8),e.YNc(5,d,1,0,null,4),e.YNc(6,b,2,6,"button",9),e.qZA()()}if(2&n){const t=e.oxw();e.uIk("id",t.id+"-titlebar"),e.xp6(1),e.Q6J("ngIf",t.header),e.xp6(2),e.Q6J("ngTemplateOutlet",t.headerTemplate),e.xp6(1),e.Q6J("ngClass",e.kEZ(6,C,"start"===t.iconPos,"end"===t.iconPos,"center"===t.iconPos)),e.xp6(1),e.Q6J("ngTemplateOutlet",t.iconTemplate),e.xp6(1),e.Q6J("ngIf",t.toggleable)}}function D(n,g){1&n&&e.GkF(0)}function _(n,g){1&n&&e.GkF(0)}function T(n,g){if(1&n&&(e.TgZ(0,"div",12),e.Hsn(1,2),e.YNc(2,_,1,0,"ng-container",4),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}const l=["*",[["p-header"]],[["p-footer"]]],h=function(n,g){return{"p-panel p-component":!0,"p-panel-toggleable":n,"p-panel-expanded":g}},m=function(n){return{transitionParams:n,height:"0",opacity:"0"}},w=function(n){return{value:"hidden",params:n}},E=function(n){return{transitionParams:n,height:"*",opacity:"1"}},O=function(n){return{value:"visible",params:n}},x=["*","p-header","p-footer"];let B=0,I=(()=>{class n{constructor(t){this.el=t,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new e.vpe,this.onBeforeToggle=new e.vpe,this.onAfterToggle=new e.vpe,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+B++}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"icons":this.iconTemplate=t.template}})}onHeaderClick(t){"header"===this.toggler&&this.toggle(t)}onIconClick(t){"icon"===this.toggler&&this.toggle(t)}toggle(t){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:t,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(t):this.collapse(t)),t.preventDefault()}expand(t){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(t){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(t){this.animating=!1,this.onAfterToggle.emit({originalEvent:t,collapsed:this.collapsed})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-panel"]],contentQueries:function(t,u,P){if(1&t&&(e.Suo(P,f.$_,5),e.Suo(P,f.jx,4)),2&t){let y;e.iGM(y=e.CRH())&&(u.footerFacet=y.first),e.iGM(y=e.CRH())&&(u.templates=y)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:x,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(t,u){1&t&&(e.F$t(l),e.TgZ(0,"div",0),e.YNc(1,M,7,10,"div",1),e.TgZ(2,"div",2),e.NdJ("@panelContent.done",function(y){return u.onToggleDone(y)}),e.TgZ(3,"div",3),e.Hsn(4),e.YNc(5,D,1,0,"ng-container",4),e.qZA(),e.YNc(6,T,3,1,"div",5),e.qZA()()),2&t&&(e.Tol(u.styleClass),e.Q6J("ngClass",e.WLB(12,h,u.toggleable,!u.collapsed&&u.toggleable))("ngStyle",u.style),e.uIk("id",u.id),e.xp6(1),e.Q6J("ngIf",u.showHeader),e.xp6(1),e.Q6J("@panelContent",u.collapsed?e.VKq(17,w,e.VKq(15,m,u.animating?u.transitionOptions:"0ms")):e.VKq(21,O,e.VKq(19,E,u.animating?u.transitionOptions:"0ms"))),e.uIk("id",u.id+"-content")("aria-hidden",u.collapsed)("aria-labelledby",u.id+"-titlebar"),e.xp6(3),e.Q6J("ngTemplateOutlet",u.contentTemplate),e.xp6(1),e.Q6J("ngIf",u.footerFacet||u.footerTemplate))},dependencies:[c.mk,c.O5,c.tP,c.PC,p.H],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[(0,a.X$)("panelContent",[(0,a.SB)("hidden",(0,a.oB)({height:"0"})),(0,a.SB)("void",(0,a.oB)({height:"{{height}}"}),{params:{height:"0"}}),(0,a.SB)("visible",(0,a.oB)({height:"*"})),(0,a.eR)("visible <=> hidden",[(0,a.jt)("{{transitionParams}}")]),(0,a.eR)("void => hidden",(0,a.jt)("{{transitionParams}}")),(0,a.eR)("void => visible",(0,a.jt)("{{transitionParams}}"))])]},changeDetection:0}),n})(),A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,f.m8,p.T,f.m8]}),n})()},7463:(k,v,r)=>{r.d(v,{a:()=>M,l:()=>D});var e=r(1571),c=r(6895),f=r(805),p=r(5593),a=r(9512);const o=["container"],s=["defaultbtn"],i=["menu"];function d(_,T){1&_&&e.GkF(0)}function b(_,T){if(1&_){const l=e.EpF();e.ynx(0),e.TgZ(1,"button",7),e.NdJ("click",function(m){e.CHM(l);const w=e.oxw();return e.KtG(w.onDefaultButtonClick(m))}),e.YNc(2,d,1,0,"ng-container",8),e.qZA(),e.BQk()}if(2&_){const l=e.oxw();e.xp6(1),e.Q6J("icon",l.icon)("iconPos",l.iconPos)("disabled",l.disabled),e.uIk("tabindex",l.tabindex),e.xp6(1),e.Q6J("ngTemplateOutlet",l.contentTemplate)}}function C(_,T){if(1&_){const l=e.EpF();e.TgZ(0,"button",9,10),e.NdJ("click",function(m){e.CHM(l);const w=e.oxw();return e.KtG(w.onDefaultButtonClick(m))}),e.qZA()}if(2&_){const l=e.oxw();e.Q6J("icon",l.icon)("iconPos",l.iconPos)("label",l.label)("disabled",l.disabled),e.uIk("tabindex",l.tabindex)}}let M=(()=>{class _{constructor(){this.iconPos="left",this.onClick=new e.vpe,this.onDropdownClick=new e.vpe,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear"}ngAfterContentInit(){this.templates.forEach(l=>{l.getType(),this.contentTemplate=l.template})}onDefaultButtonClick(l){this.onClick.emit(l)}onDropdownButtonClick(l){this.onDropdownClick.emit(l),this.menu.toggle({currentTarget:this.containerViewChild.nativeElement,relativeAlign:null==this.appendTo})}}return _.\u0275fac=function(l){return new(l||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["p-splitButton"]],contentQueries:function(l,h,m){if(1&l&&e.Suo(m,f.jx,4),2&l){let w;e.iGM(w=e.CRH())&&(h.templates=w)}},viewQuery:function(l,h){if(1&l&&(e.Gf(o,5),e.Gf(s,5),e.Gf(i,5)),2&l){let m;e.iGM(m=e.CRH())&&(h.containerViewChild=m.first),e.iGM(m=e.CRH())&&(h.buttonViewChild=m.first),e.iGM(m=e.CRH())&&(h.menu=m.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",icon:"icon",iconPos:"iconPos",label:"label",style:"style",styleClass:"styleClass",menuStyle:"menuStyle",menuStyleClass:"menuStyleClass",disabled:"disabled",tabindex:"tabindex",appendTo:"appendTo",dir:"dir",expandAriaLabel:"expandAriaLabel",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClick:"onClick",onDropdownClick:"onDropdownClick"},decls:8,vars:16,consts:[[3,"ngClass","ngStyle"],["container",""],[4,"ngIf","ngIfElse"],["defaultButton",""],["type","button","pButton","","icon","pi pi-chevron-down",1,"p-splitbutton-menubutton",3,"disabled","click"],[3,"popup","model","styleClass","appendTo","showTransitionOptions","hideTransitionOptions"],["menu",""],["type","button","pButton","",1,"p-splitbutton-defaultbutton",3,"icon","iconPos","disabled","click"],[4,"ngTemplateOutlet"],["type","button","pButton","",1,"p-splitbutton-defaultbutton",3,"icon","iconPos","label","disabled","click"],["defaultbtn",""]],template:function(l,h){if(1&l&&(e.TgZ(0,"div",0,1),e.YNc(2,b,3,5,"ng-container",2),e.YNc(3,C,2,5,"ng-template",null,3,e.W1O),e.TgZ(5,"button",4),e.NdJ("click",function(w){return h.onDropdownButtonClick(w)}),e.qZA(),e._UZ(6,"p-tieredMenu",5,6),e.qZA()),2&l){const m=e.MAs(4);e.Tol(h.styleClass),e.Q6J("ngClass","p-splitbutton p-component")("ngStyle",h.style),e.xp6(2),e.Q6J("ngIf",h.contentTemplate)("ngIfElse",m),e.xp6(3),e.Q6J("disabled",h.disabled),e.uIk("aria-label",h.expandAriaLabel),e.xp6(1),e.Akn(h.menuStyle),e.Q6J("popup",!0)("model",h.model)("styleClass",h.menuStyleClass)("appendTo",h.appendTo)("showTransitionOptions",h.showTransitionOptions)("hideTransitionOptions",h.hideTransitionOptions)}},dependencies:[c.mk,c.O5,c.tP,c.PC,p.Hq,a.yp],styles:[".p-splitbutton{display:inline-flex;position:relative}.p-splitbutton .p-splitbutton-defaultbutton,.p-splitbutton.p-button-rounded>.p-splitbutton-defaultbutton.p-button,.p-splitbutton.p-button-outlined>.p-splitbutton-defaultbutton.p-button{flex:1 1 auto;border-top-right-radius:0;border-bottom-right-radius:0;border-right:0 none}.p-splitbutton-menubutton,.p-splitbutton.p-button-rounded>.p-splitbutton-menubutton.p-button,.p-splitbutton.p-button-outlined>.p-splitbutton-menubutton.p-button{display:flex;align-items:center;justify-content:center;border-top-left-radius:0;border-bottom-left-radius:0}.p-splitbutton .p-menu{min-width:100%}.p-fluid .p-splitbutton{display:flex}\n"],encapsulation:2,changeDetection:0}),_})(),D=(()=>{class _{}return _.\u0275fac=function(l){return new(l||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[c.ez,p.hJ,a.QK,p.hJ,a.QK]}),_})()},5861:(k,v,r)=>{function e(f,p,a,o,s,i,d){try{var b=f[i](d),C=b.value}catch(M){return void a(M)}b.done?p(C):Promise.resolve(C).then(o,s)}function c(f){return function(){var p=this,a=arguments;return new Promise(function(o,s){var i=f.apply(p,a);function d(C){e(i,o,s,d,b,"next",C)}function b(C){e(i,o,s,d,b,"throw",C)}d(void 0)})}}r.d(v,{Z:()=>c})}}]);