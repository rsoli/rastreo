"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[4594],{4594:(K,d,r)=>{r.d(d,{b:()=>Y});var e=r(1571),c=r(433),p=r(805),_=r(6895),s=r(5593),u=r(1795),f=r(1740),g=r(3054),h=r(2210),x=r(1493),C=r(5722),M=r(3425),v=r(1989),D=r(585),T=r(7752);function b(t,a){1&t&&(e.TgZ(0,"span",19),e._uU(1,"*"),e.qZA())}function w(t,a){if(1&t&&(e.TgZ(0,"label",20),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.Q6J("for",o.field),e.xp6(1),e.Oqu(o.header)}}function N(t,a){if(1&t&&e._UZ(0,"input",21),2&t){const o=e.oxw().$implicit;e.Q6J("formControlName",o.field)("required",o.required)}}function y(t,a){if(1&t&&e._UZ(0,"input",22),2&t){const o=e.oxw().$implicit;e.Q6J("formControlName",o.field)("required",o.required)}}function I(t,a){if(1&t&&e._UZ(0,"p-dropdown",25),2&t){const o=e.oxw(2).$implicit,n=e.oxw(2);e.Q6J("options",n.getDropdownOptions(o.field))("formControlName",o.field)("placeholder",o.placeholder?o.placeholder:"Seleccionar")("filter",!0)}}function O(t,a){if(1&t&&e._UZ(0,"p-multiSelect",26),2&t){const o=e.oxw(2).$implicit,n=e.oxw(2);e.Q6J("options",n.getDropdownOptions(o.field))("formControlName",o.field)("placeholder",o.placeholder?o.placeholder:"Seleccionar")}}function E(t,a){if(1&t&&(e.ynx(0),e.YNc(1,I,1,4,"p-dropdown",23),e.YNc(2,O,1,3,"p-multiSelect",24),e.BQk()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","select"===o.inputType&&!o.multiple),e.xp6(1),e.Q6J("ngIf","select"===o.inputType&&o.multiple)}}function J(t,a){if(1&t&&(e.TgZ(0,"textarea",27),e._uU(1,"            "),e.qZA()),2&t){const o=e.oxw().$implicit;e.Q6J("formControlName",o.field)("required",o.required)}}function Q(t,a){if(1&t&&e._UZ(0,"p-checkbox",28),2&t){const o=e.oxw().$implicit;e.Q6J("formControlName",o.field)("inputId",o.field)("binary",!0)("label",o.header)("required",o.required)}}function U(t,a){if(1&t&&e._UZ(0,"p-password",29),2&t){const o=e.oxw().$implicit;e.Q6J("formControlName",o.field)("toggleMask",!0)("feedback",!1)("required",o.required)}}function B(t,a){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"app-map",30),e.NdJ("geocercaChange",function(i){e.CHM(o);const l=e.oxw().$implicit,m=e.oxw(2);return e.KtG(m.onGeocercaChange(i,l.field))})("geocercaDeleted",function(){e.CHM(o);const i=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.OnDeleteGeocerca(i.field))}),e.qZA(),e.BQk()}if(2&t){const o=e.oxw().$implicit,n=e.oxw(2);let i;e.xp6(1),e.Q6J("id_map","map-"+n.uniqueId)("geocerca",null==(i=n.form.get(o.field))?null:i.value)}}function S(t,a){if(1&t&&(e.ynx(0),e._UZ(1,"p-calendar",31),e.BQk()),2&t){const o=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("formControlName",o.field)("touchUI",!0)("readonlyInput",!0)("showOnFocus",!0)("showButtonBar",!1)("locale",n.es)("placeholder",o.header)}}function q(t,a){if(1&t&&(e.ynx(0),e._UZ(1,"p-calendar",32),e.BQk()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("formControlName",o.field)("touchUI",!0)("readonlyInput",!0)("showOnFocus",!0)("showButtonBar",!1)("placeholder",o.header)("showTime",!0)("required",o.required)}}function Z(t,a){if(1&t&&(e.ynx(0),e._UZ(1,"p-calendar",33),e.BQk()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("formControlName",o.field)("touchUI",!0)("showTime",!0)("showButtonBar",!1)("hourFormat","24")("showOnFocus",!0)("placeholder",o.header)("readonlyInput",!0)("timeOnly",!0)("required",o.required)}}function P(t,a){1&t&&(e.TgZ(0,"span"),e._uU(1," M\xe1ximo caracteres permitidos 20 "),e.qZA())}function A(t,a){1&t&&(e.TgZ(0,"span"),e._uU(1," Solo se permite n\xfameros "),e.qZA())}function F(t,a){if(1&t&&(e.TgZ(0,"div",8),e.YNc(1,b,2,0,"span",9),e.YNc(2,w,2,2,"label",10),e.ynx(3,11),e.YNc(4,N,1,2,"input",12),e.YNc(5,y,1,2,"input",13),e.YNc(6,E,3,2,"ng-container",14),e.YNc(7,J,2,2,"textarea",15),e.YNc(8,Q,1,5,"p-checkbox",16),e.YNc(9,U,1,4,"p-password",17),e.YNc(10,B,2,2,"ng-container",14),e.YNc(11,S,2,7,"ng-container",14),e.YNc(12,q,2,8,"ng-container",14),e.YNc(13,Z,2,10,"ng-container",14),e.BQk(),e.YNc(14,P,2,0,"span",18),e.YNc(15,A,2,0,"span",18),e.qZA()),2&t){const o=a.$implicit,n=e.oxw(2);e.Q6J("hidden",!o.visibleForm),e.xp6(1),e.Q6J("ngIf",o.required&&n.form.controls[o.field].errors),e.xp6(1),e.Q6J("ngIf","checkbox"!==o.inputType),e.xp6(1),e.Q6J("ngSwitch",o.inputType),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","number"),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","textarea"),e.xp6(1),e.Q6J("ngSwitchCase","checkbox"),e.xp6(1),e.Q6J("ngSwitchCase","password"),e.xp6(1),e.Q6J("ngSwitchCase","map"),e.xp6(1),e.Q6J("ngSwitchCase","date"),e.xp6(1),e.Q6J("ngSwitchCase","datetime"),e.xp6(1),e.Q6J("ngSwitchCase","time"),e.xp6(1),e.Q6J("ngIf",null==n.form.controls[o.field].errors?null:n.form.controls[o.field].errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==n.form.controls[o.field].errors?null:n.form.controls[o.field].errors.pattern)}}function L(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.save())}),e.YNc(1,F,16,16,"div",3),e.TgZ(2,"div",4)(3,"div",5)(4,"button",6),e.NdJ("click",function(i){e.CHM(o);const l=e.oxw();return e.KtG(l.cancel(i))}),e.qZA()(),e.TgZ(5,"div",5),e._UZ(6,"button",7),e.qZA()()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("ngForOf",o.columns),e.xp6(5),e.Q6J("disabled",o.form.invalid)}}const k=function(){return{width:"450px"}};let Y=(()=>{class t{constructor(o,n){this.fb=o,this.primengConfig=n,this.form=this.fb.group({}),this.columns=[],this.modalVisible=!1,this.titleModal="",this.formSave=new e.vpe,this.closeModal=new e.vpe,this.formData={},this.uniqueId=""}ngOnInit(){this.uniqueId=this.generateUniqueId(),this.formatoFecha(),this.createForm()}generateUniqueId(){return Math.random().toString(36).substr(2,9)}formatoFecha(){this.primengConfig.setTranslation({dayNames:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],dayNamesShort:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],dayNamesMin:["D","L","M","X","J","V","S"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],today:"Hoy",clear:"Borrar",dateFormat:"dd/mm/yy",firstDayOfWeek:1})}createForm(){const o={};this.columns.forEach(n=>{const i=[];n.required&&i.push(c.kI.required);let l=this.formData[n.field];if(void 0===l)switch(n.inputType){case"multiselect":l=[];break;case"select":l=null;break;case"number":l=0;break;default:l=""}o[n.field]=n.disabled?[{value:l,disabled:!0},i]:[l,i]}),this.form=this.fb.group(o)}save(){this.form.valid&&this.formSave.emit(this.form.value)}ngOnChanges(o){o.formData&&!o.formData.firstChange&&this.createForm()}cancel(o){o.preventDefault(),this.closeModal.emit()}getDropdownOptions(o){const n=this.columns.find(i=>i.field===o);return n?n.options:[]}onGeocercaChange(o,n){var i,l,m;null===(i=this.form.get(n))||void 0===i||i.setValue(o),null===(l=this.form.get(n))||void 0===l||l.markAsTouched(),null===(m=this.form.get(n))||void 0===m||m.updateValueAndValidity()}OnDeleteGeocerca(o){var n;null===(n=this.form.get(o))||void 0===n||n.setValue("")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.qu),e.Y36(p.b4))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-modal-dinamica"]],inputs:{columns:"columns",modalVisible:"modalVisible",titleModal:"titleModal",formData:"formData"},outputs:{formSave:"formSave",closeModal:"closeModal"},features:[e.TTD],decls:2,vars:6,consts:[["styleClass","p-fluid",3,"visible","header","modal","visibleChange","onHide"],["pTemplate","content"],[3,"formGroup","ngSubmit"],["class","field",3,"hidden",4,"ngFor","ngForOf"],[1,"flex","justify-content-end","flex-wrap","card-container"],[1,"flex","align-items-center","justify-content-center","w-7rem","h-4rem","m-2"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","type","submit","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"disabled"],[1,"field",3,"hidden"],["style","color: red;",4,"ngIf"],[3,"for",4,"ngIf"],[3,"ngSwitch"],["type","text","pInputText","",3,"formControlName","required",4,"ngSwitchCase"],["type","number","pInputText","",3,"formControlName","required",4,"ngSwitchCase"],[4,"ngSwitchCase"],["pInputTextarea","",3,"formControlName","required",4,"ngSwitchCase"],[3,"formControlName","inputId","binary","label","required",4,"ngSwitchCase"],[3,"formControlName","toggleMask","feedback","required",4,"ngSwitchCase"],[4,"ngIf"],[2,"color","red"],[3,"for"],["type","text","pInputText","",3,"formControlName","required"],["type","number","pInputText","",3,"formControlName","required"],["optionLabel","label","filterBy","label","appendTo","body",3,"options","formControlName","placeholder","filter",4,"ngIf"],["optionLabel","label","appendTo","body",3,"options","formControlName","placeholder",4,"ngIf"],["optionLabel","label","filterBy","label","appendTo","body",3,"options","formControlName","placeholder","filter"],["optionLabel","label","appendTo","body",3,"options","formControlName","placeholder"],["pInputTextarea","",3,"formControlName","required"],[3,"formControlName","inputId","binary","label","required"],[3,"formControlName","toggleMask","feedback","required"],[3,"id_map","geocerca","geocercaChange","geocercaDeleted"],["dateFormat","dd/mm/yy",3,"formControlName","touchUI","readonlyInput","showOnFocus","showButtonBar","locale","placeholder"],["dateFormat","dd/mm/yy","hourFormat","24",3,"formControlName","touchUI","readonlyInput","showOnFocus","showButtonBar","placeholder","showTime","required"],[3,"formControlName","touchUI","showTime","showButtonBar","hourFormat","showOnFocus","placeholder","readonlyInput","timeOnly","required"]],template:function(o,n){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(l){return n.modalVisible=l})("onHide",function(){return n.closeModal.emit()}),e.YNc(1,L,7,3,"ng-template",1),e.qZA()),2&o&&(e.Akn(e.DdM(5,k)),e.s9C("header",n.titleModal),e.Q6J("visible",n.modalVisible)("modal",!0))},dependencies:[_.sg,_.O5,_.RF,_.n9,p.jx,s.Hq,u.H,f.o,g.g,h.Lt,x.V,C.NU,M.ro,v.XZ,D.f,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.sg,c.u,T.G]}),t})()}}]);