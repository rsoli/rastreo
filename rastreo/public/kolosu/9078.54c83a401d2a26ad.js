"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[9078],{9078:(S,p,a)=>{a.r(p),a.d(p,{VehiculoComponentModule:()=>y});var v=a(6895),c=a(6957),m=a(805);let h=(()=>{class t{constructor(){this.id_vehiculo=0,this.tipo_servicio="",this.id_tipo_servicio=0,this.nombre_departamento="",this.id_departamento=0,this.placa="",this.marca="",this.modelo="",this.color="",this.cilindrada="",this.uniqueid="",this.linea_gps="",this.modelo_gps="",this.fecha_registro="",this.id_cliente=0}static initialize(e,i){this.ComboTipoServicio(e,i),this.ComboDepartamento(e)}static ComboTipoServicio(e,i){e.getAll("servicio/lista_pago_servicio_cliente/"+i).subscribe({next:o=>{const u=(o.lista_pago_seleccionado||[]).map(d=>({label:d.tipo_servicio,value:d.id_tipo_servicio})),s=t.columns.find(d=>"id_tipo_servicio"===d.field);s&&(s.options=u)},error:o=>{console.error("Error cargando opciones de tipo de servicio",o)}})}static ComboDepartamento(e){e.getAll("parametros/lista_departamento").subscribe({next:i=>{const l=(i.departamentos||[]).map(s=>({label:s.nombre_departamento,value:s.id_departamento})),u=t.columns.find(s=>"id_departamento"===s.field);u&&(u.options=l)},error:i=>{console.error("Error cargando opciones de tipo de servicio",i)}})}}return t.columns=[{field:"id_vehiculo",header:"ID",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"tipo_servicio",header:"Tipo servicio",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"id_tipo_servicio",header:"Tipo Servicio",visibleTable:!1,visibleForm:!0,inputType:"select",required:!0,options:[],multiple:!1},{field:"nombre_departamento",header:"Departamento",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"id_departamento",header:"Departamento",visibleTable:!1,visibleForm:!0,inputType:"select",required:!0,options:[],multiple:!1},{field:"placa",header:"Placa",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"marca",header:"Marca",visibleTable:!0,visibleForm:!0,inputType:"text",required:!1},{field:"modelo",header:"Modelo",visibleTable:!0,visibleForm:!0,inputType:"text",required:!1},{field:"color",header:"Color",visibleTable:!0,visibleForm:!0,inputType:"text",required:!1},{field:"cilindrada",header:"Cilindrada",visibleTable:!0,visibleForm:!0,inputType:"text",required:!1},{field:"uniqueid",header:"Imei",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"linea_gps",header:"L\xednea GPS",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"modelo_gps",header:"Modelo GPS",visibleTable:!0,visibleForm:!0,inputType:"text",required:!0},{field:"fecha_registro",header:"Fecha Registro",visibleTable:!0,visibleForm:!1,inputType:"datetime",required:!1},{field:"id_cliente",header:"ID Cliente",visibleTable:!1,visibleForm:!1,inputType:"select",required:!1,options:[],multiple:!1}],t})();var r=a(1571),b=a(6253),f=a(3617),_=a(2453),g=a(1023);const T=[{path:"",component:(()=>{class t{constructor(e,i,o,l){this.apiService=e,this.messageService=i,this.route=o,this.router=l,this.loading=!1,this.lista_vehiculo=[],this.columnas_vehiculo=h.columns,this.toolbarButtons=new Array,this.id_cliente=0}ngOnInit(){this.AgregarBotones(),this.route.paramMap.subscribe(e=>{this.id_cliente=Number(e.get("id_cliente")),this.ListarVehiculo(),h.initialize(this.apiService,this.id_cliente)})}ListarVehiculo(){this.loading=!0,this.apiService.getAll("vehiculo/lista_cliente_vehiculos/"+this.id_cliente).subscribe({next:e=>{this.lista_vehiculo=JSON.parse(JSON.stringify(e)).lista_cliente_vehiculos},error:e=>{this.MensajeError("Error al obtener la lista")},complete:()=>{this.loading=!1}})}guardarVehiculo(e){this.loading=!0,e.id_cliente=this.id_cliente,this.apiService.create("vehiculo/post_cliente_vehiculo",e).subscribe({next:i=>{var o;const l=null===(o=i?.mensaje)||void 0===o?void 0:o[0];l?this.MensajeError(l):this.ListarVehiculo()},error:i=>{this.MensajeError("Verifique su conexi\ufffdn a internet")},complete:()=>{this.loading=!1}})}eliminarVehiculo(e){e.id_vehiculo&&(this.loading=!0,this.apiService.delete("vehiculo/eliminar_vehiculo",e.id_vehiculo).subscribe({next:()=>{this.ListarVehiculo()},error:i=>{this.MensajeError("Error al eliminar")},complete:()=>{this.loading=!1}}))}seleccionarVehiculo(e){this.messageService.clear(),this.MensajeInfo("Veh\xedculo "+e.placa,!0)}deshacerSeleccionVehiculo(e){}AgregarBotones(){this.toolbarButtons.push({name:"btnAtras",label:"Volver",action:"volveratras",icon:"pi pi-arrow-left",disabled:!0,class:"p-button-rounded p-button-info"}),this.ButtonEnabled("btnAtras",!1)}ButtonClick(e){const{action:i}=e;"volveratras"===i?this.router.navigate(["/rastreo/lista_cliente"]):"onPruba2"===i||console.error("Accion no soportada")}MensajeError(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}MensajeSucces(e){this.messageService.add({severity:"success",summary:"\ufffdxito",detail:e})}MensajeInfo(e,i){this.messageService.add(1==i?{severity:"info",summary:"Seleccionado",detail:e}:{severity:"info",summary:"Informaci\ufffdn",detail:e})}ButtonEnabled(e,i){this.toolbarButtons.forEach(o=>{o.name===e&&(o.disabled=i)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(b.s),r.Y36(m.ez),r.Y36(c.gz),r.Y36(c.F0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-vehiculo"]],features:[r._Bn([m.ez])],decls:4,vars:5,consts:[[1,"card"],[3,"loading"],["titleTable","Lista de Vehiculo",3,"buttons","columns","data","selected","buttonClick","Unselect","formSave","delete"]],template:function(e,i){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"p-toast")(2,"app-loading",1),r.TgZ(3,"app-tabla-dinamica",2),r.NdJ("selected",function(l){return i.seleccionarVehiculo(l)})("buttonClick",function(l){return i.ButtonClick(l)})("Unselect",function(l){return i.deshacerSeleccionVehiculo(l)})("formSave",function(l){return i.guardarVehiculo(l)})("delete",function(l){return i.eliminarVehiculo(l)})("buttonClick",function(l){return i.ButtonClick(l)}),r.qZA()()),2&e&&(r.xp6(2),r.Q6J("loading",i.loading),r.xp6(1),r.Q6J("buttons",i.toolbarButtons)("columns",i.columnas_vehiculo)("data",i.lista_vehiculo)("buttons",i.toolbarButtons))},dependencies:[f.N,_.FN,g.C]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[c.Bz.forChild(T),c.Bz]}),t})();var V=a(1511);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[v.ez,C,V.m]}),t})()}}]);