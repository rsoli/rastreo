"use strict";(self.webpackChunkrsoli=self.webpackChunkrsoli||[]).push([[149],{7149:(re,U,a)=>{a.r(U),a.d(U,{SeguridadModule:()=>te});var g=a(8583),A=a(9731),Z=a(324),u=a(3013),w=a(8259),l=a.n(w),s=a(665),m=a(5231),o=a(3018),_=a(225),q=a(4349),T=a(4207),x=a(9309),f=a(3928),R=a(6610),k=a(103),L=a(6949);function O(t,n){1&t&&(o.TgZ(0,"span",24),o._uU(1,"*"),o.qZA())}function Y(t,n){1&t&&(o.TgZ(0,"span",25),o._UZ(1,"i",26),o.qZA())}function Q(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," M\xe1ximo caracteres permitidos 20 "),o.qZA())}function P(t,n){1&t&&(o.TgZ(0,"span",24),o._uU(1,"*"),o.qZA())}function F(t,n){1&t&&(o.TgZ(0,"span",25),o._UZ(1,"i",26),o.qZA())}function E(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," M\xe1ximo caracteres permitidos 50 "),o.qZA())}function B(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," M\xednimo caracteres permitidos 8 "),o.qZA())}function G(t,n){1&t&&(o.TgZ(0,"span",24),o._uU(1,"*"),o.qZA())}function H(t,n){1&t&&(o.TgZ(0,"span",25),o._UZ(1,"i",26),o.qZA())}function z(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," M\xe1ximo caracteres permitidos 50 "),o.qZA())}function j(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," M\xednimo caracteres permitidos 8 "),o.qZA())}function D(t,n){1&t&&(o.TgZ(0,"span",24),o._uU(1,"*"),o.qZA())}function X(t,n){1&t&&(o.TgZ(0,"span",25),o._UZ(1,"i",26),o.qZA())}function V(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," M\xe1ximo caracteres permitidos 50 "),o.qZA())}function $(t,n){1&t&&(o.TgZ(0,"span",27),o._uU(1," Formato de correo incorrecto "),o.qZA())}function K(t,n){1&t&&(o.TgZ(0,"span",24),o._uU(1,"*"),o.qZA())}function W(t,n){1&t&&(o.TgZ(0,"span",25),o._UZ(1,"i",26),o.qZA())}function oo(t,n){1&t&&(o.TgZ(0,"span",31),o._uU(1,"Nombre : "),o.qZA())}function eo(t,n){1&t&&(o.TgZ(0,"span",31),o._uU(1,"Ap. paterno : "),o.qZA())}function to(t,n){1&t&&(o.TgZ(0,"span",31),o._uU(1,"Ap. materno : "),o.qZA())}function ro(t,n){1&t&&(o.TgZ(0,"span",31),o._uU(1,"CI : "),o.qZA())}function no(t,n){if(1&t&&(o.TgZ(0,"div",28),o.TgZ(1,"div",29),o.YNc(2,oo,2,0,"span",30),o._uU(3),o._UZ(4,"br"),o.YNc(5,eo,2,0,"span",30),o._uU(6),o._UZ(7,"br"),o.YNc(8,to,2,0,"span",30),o._uU(9),o._UZ(10,"br"),o.YNc(11,ro,2,0,"span",30),o._uU(12),o._UZ(13,"br"),o.qZA(),o.qZA()),2&t){const e=n.$implicit,r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.form_usuario.controls.contrasena.errors),o.xp6(1),o.hij(" ",e.nombre," "),o.xp6(2),o.Q6J("ngIf",r.form_usuario.controls.contrasena.errors),o.xp6(1),o.hij(" ",e.apellido_paterno," "),o.xp6(2),o.Q6J("ngIf",r.form_usuario.controls.contrasena.errors),o.xp6(1),o.hij(" ",e.apellido_materno," "),o.xp6(2),o.Q6J("ngIf",r.form_usuario.controls.contrasena.errors),o.xp6(1),o.hij(" ",e.ci," ")}}function so(t,n){1&t&&(o.TgZ(0,"span",24),o._uU(1,"*"),o.qZA())}function io(t,n){1&t&&(o.TgZ(0,"span",25),o._UZ(1,"i",26),o.qZA())}let C=(()=>{class t{constructor(e,r){this.bsModalRef=e,this.usuario_servicio=r,this.titulo="",this.usuario=new Z.I,this.lista_roles=[],this.lista_roles_seleccionados=[],this.lista_personas_seleccionados=new m.x,this.lista_personas=[],this.sesion=!1}ngOnInit(){this.sesion=JSON.parse(localStorage.getItem("accesos")||"{}").sesion,this.IniciarFormulario()}IniciarFormulario(){this.form_usuario=new s.cw(0==this.usuario.id_usuario?{usuario:new s.NI(this.usuario.usuario,[s.kI.required,s.kI.maxLength(20)]),contrasena:new s.NI(this.usuario.password,[s.kI.required,s.kI.minLength(8),s.kI.maxLength(50)]),repetir_contrasena:new s.NI("",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(50)]),email:new s.NI(this.usuario.email,[s.kI.required,s.kI.maxLength(50),s.kI.email]),lista_personas_seleccionados:new s.NI(this.lista_personas_seleccionados,[s.kI.required]),lista_roles_seleccionados:new s.NI(this.lista_roles_seleccionados,[s.kI.required])}:{usuario:new s.NI(this.usuario.usuario,[s.kI.required,s.kI.maxLength(20)]),contrasena:new s.NI("",[s.kI.maxLength(50)]),repetir_contrasena:new s.NI("",[s.kI.maxLength(50)]),email:new s.NI(this.usuario.email,[s.kI.required,s.kI.maxLength(50),s.kI.email]),lista_personas_seleccionados:new s.NI(this.lista_personas_seleccionados,[s.kI.required]),lista_roles_seleccionados:new s.NI(this.lista_roles_seleccionados,[s.kI.required])})}CargarValores(){this.loading(),this.usuario_servicio.get_usuario(this.usuario.id_usuario).subscribe(e=>{this.close(),this.lista_personas=JSON.parse(JSON.stringify(e)).personas,this.lista_roles=JSON.parse(JSON.stringify(e)).roles,0!=this.usuario.id_usuario?(this.usuario=JSON.parse(JSON.stringify(e)).usuario[0],this.usuario.email=JSON.parse(JSON.stringify(e)).usuario[0].correo,this.lista_roles_seleccionados=JSON.parse(JSON.stringify(e)).usuario_rol,this.lista_personas_seleccionados=JSON.parse(JSON.stringify(e)).usuario_persona[0]):(this.usuario.email="",this.lista_personas_seleccionados=new m.x,this.lista_roles_seleccionados=[]),this.IniciarFormulario()},e=>{this.close(),this.error("Error","Verifique su conexion internet")})}GuardarUsuario(){""==this.form_usuario.controls.contrasena.value&&""==this.form_usuario.controls.repetir_contrasena.value||this.form_usuario.controls.contrasena.value==this.form_usuario.controls.repetir_contrasena.value?(this.loading(),this.usuario.usuario=this.form_usuario.controls.usuario.value,this.usuario.contrasena=this.form_usuario.controls.contrasena.value,this.usuario.correo=this.form_usuario.controls.email.value,this.usuario.id_persona=this.form_usuario.controls.lista_personas_seleccionados.value.id_persona,this.usuario.id_roles=this.form_usuario.controls.lista_roles_seleccionados.value,this.usuario_servicio.post_usuario(this.usuario).subscribe(e=>{this.close(),JSON.parse(JSON.stringify(e)).mensaje[0]?this.error("Error!!",JSON.parse(JSON.stringify(e)).mensaje[0]):this.bsModalRef.hide()},e=>{this.close(),this.error("Error","Verifique su conexion a internet"),console.log(e)})):(this.error("Error","Los campos de contrasenas no coinciden"),console.log(this.form_usuario.controls.contrasena.value+" - "+this.form_usuario.controls.repetir_contrasena.value))}loading(){l().fire({title:"Verificando datos",html:"Cargando",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}})}close(){l().close()}error(e,r){l().fire({icon:"error",title:e,text:r})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(_.UZ),o.Y36(q.i))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-modal-usuario"]],inputs:{titulo:"titulo",usuario:"usuario"},decls:66,vars:33,consts:[[1,"modal-header",2,"border-top","4px solid #007bff !important"],[1,"modal-title","pull-left"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger","p-button-outlined",3,"click"],[3,"formGroup","submit"],[1,"modal-body",2,"padding","20px 40px 20px 40px"],[1,"row"],[1,"col-lg-12"],[2,"margin","0px","padding","0px"],["style","color: red;",4,"ngIf"],["style","color: green;",4,"ngIf"],["type","text","pInputText","","formControlName","usuario"],["class"," form-error text-danger small",4,"ngIf"],["formControlName","contrasena",3,"toggleMask","feedback"],["formControlName","repetir_contrasena",3,"toggleMask","feedback"],["type","text","pInputText","","formControlName","email"],[1,"row",3,"hidden"],["formControlName","lista_personas_seleccionados","optionLabel","nombre","filterBy","nombre,apellido_paterno,apellido_materno,ci",3,"options","filter","showClear","autoDisplayFirst"],["pTemplate","item"],["formControlName","lista_roles_seleccionados","defaultLabel","Seleccionar","display","chip","optionLabel","nombre_rol",3,"options"],[2,"display","inline-flex"],[2,"padding-left","2px"],["pButton","","pRipple","","type","submit","label","Guardar",1,"p-button-raised",3,"disabled"],[2,"width","10px"],["pButton","","pRipple","","type","button","label","Cancelar",1,"p-button-raised","p-button-danger",3,"click"],[2,"color","red"],[2,"color","green"],[1,"fas","fa-check",2,"width","10px"],[1,"form-error","text-danger","small"],[1,"country-item"],[2,"border-bottom","1px solid #dee2e6"],["style","font-weight: bold;",4,"ngIf"],[2,"font-weight","bold"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h4",1),o._uU(2),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return r.bsModalRef.hide()}),o.qZA(),o.qZA(),o.TgZ(4,"form",3),o.NdJ("submit",function(){return r.GuardarUsuario()}),o.TgZ(5,"div",4),o.TgZ(6,"div"),o.TgZ(7,"div",5),o.TgZ(8,"div",6),o.TgZ(9,"label",7),o.YNc(10,O,2,0,"span",8),o.YNc(11,Y,2,0,"span",9),o._uU(12," Nombre Usuario "),o.qZA(),o._UZ(13,"input",10),o.YNc(14,Q,2,0,"span",11),o.qZA(),o.qZA(),o.TgZ(15,"div",5),o.TgZ(16,"div",6),o.TgZ(17,"label",7),o.YNc(18,P,2,0,"span",8),o.YNc(19,F,2,0,"span",9),o._uU(20," Contrase\xf1a "),o.qZA(),o._UZ(21,"p-password",12),o.YNc(22,E,2,0,"span",11),o.YNc(23,B,2,0,"span",11),o.qZA(),o.qZA(),o.TgZ(24,"div",5),o.TgZ(25,"div",6),o.TgZ(26,"label",7),o.YNc(27,G,2,0,"span",8),o.YNc(28,H,2,0,"span",9),o._uU(29," Repetir contrase\xf1a "),o.qZA(),o._UZ(30,"p-password",13),o.YNc(31,z,2,0,"span",11),o.YNc(32,j,2,0,"span",11),o.qZA(),o.qZA(),o.TgZ(33,"div",5),o.TgZ(34,"div",6),o.TgZ(35,"label",7),o.YNc(36,D,2,0,"span",8),o.YNc(37,X,2,0,"span",9),o._uU(38," Correo "),o.qZA(),o._UZ(39,"input",14),o.YNc(40,V,2,0,"span",11),o.YNc(41,$,2,0,"span",11),o.qZA(),o.qZA(),o.TgZ(42,"div",15),o.TgZ(43,"div",6),o.TgZ(44,"label",7),o.YNc(45,K,2,0,"span",8),o.YNc(46,W,2,0,"span",9),o._uU(47," Persona "),o.qZA(),o.TgZ(48,"p-dropdown",16),o.YNc(49,no,14,8,"ng-template",17),o.qZA(),o.qZA(),o.qZA(),o.TgZ(50,"div",15),o.TgZ(51,"div",6),o.TgZ(52,"label",7),o.YNc(53,so,2,0,"span",8),o.YNc(54,io,2,0,"span",9),o._uU(55," Roles "),o.qZA(),o._UZ(56,"p-multiSelect",18),o.qZA(),o.qZA(),o._UZ(57,"br"),o.TgZ(58,"div",5),o.TgZ(59,"div",6),o.TgZ(60,"div",19),o.TgZ(61,"div",20),o._UZ(62,"button",21),o.qZA(),o._UZ(63,"div",22),o.TgZ(64,"div"),o.TgZ(65,"button",23),o.NdJ("click",function(){return r.bsModalRef.hide()}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Oqu(r.titulo),o.xp6(2),o.Q6J("formGroup",r.form_usuario),o.xp6(6),o.Q6J("ngIf",r.form_usuario.controls.usuario.errors),o.xp6(1),o.Q6J("ngIf",!r.form_usuario.controls.usuario.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_usuario.controls.usuario.errors?null:r.form_usuario.controls.usuario.errors.maxlength),o.xp6(4),o.Q6J("ngIf",r.form_usuario.controls.contrasena.errors),o.xp6(1),o.Q6J("ngIf",!r.form_usuario.controls.contrasena.errors),o.xp6(2),o.Q6J("toggleMask",!0)("feedback",!1),o.xp6(1),o.Q6J("ngIf",null==r.form_usuario.controls.contrasena.errors?null:r.form_usuario.controls.contrasena.errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==r.form_usuario.controls.contrasena.errors?null:r.form_usuario.controls.contrasena.errors.minlength),o.xp6(4),o.Q6J("ngIf",r.form_usuario.controls.repetir_contrasena.errors),o.xp6(1),o.Q6J("ngIf",!r.form_usuario.controls.repetir_contrasena.errors),o.xp6(2),o.Q6J("toggleMask",!0)("feedback",!1),o.xp6(1),o.Q6J("ngIf",null==r.form_usuario.controls.repetir_contrasena.errors?null:r.form_usuario.controls.repetir_contrasena.errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==r.form_usuario.controls.repetir_contrasena.errors?null:r.form_usuario.controls.repetir_contrasena.errors.minlength),o.xp6(4),o.Q6J("ngIf",r.form_usuario.controls.email.errors),o.xp6(1),o.Q6J("ngIf",!r.form_usuario.controls.email.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_usuario.controls.email.errors?null:r.form_usuario.controls.email.errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==r.form_usuario.controls.email.errors?null:r.form_usuario.controls.email.errors.email),o.xp6(1),o.Q6J("hidden",r.sesion),o.xp6(3),o.Q6J("ngIf",null==r.form_usuario.controls.lista_personas_seleccionados.errors?null:r.form_usuario.controls.lista_personas_seleccionados.errors.required),o.xp6(1),o.Q6J("ngIf",!(null!=r.form_usuario.controls.lista_personas_seleccionados.errors&&r.form_usuario.controls.lista_personas_seleccionados.errors.required)),o.xp6(2),o.Q6J("options",r.lista_personas)("filter",!0)("showClear",!0)("autoDisplayFirst",!1),o.xp6(2),o.Q6J("hidden",r.sesion),o.xp6(3),o.Q6J("ngIf",r.form_usuario.controls.lista_roles_seleccionados.errors),o.xp6(1),o.Q6J("ngIf",!r.form_usuario.controls.lista_roles_seleccionados.errors),o.xp6(2),o.Q6J("options",r.lista_roles),o.xp6(6),o.Q6J("disabled",r.form_usuario.invalid))},directives:[T.Hq,x.H,s._Y,s.JL,s.sg,g.O5,s.Fj,f.o,s.JJ,s.u,R.ro,k.Lt,u.jx,L.NU],styles:[""]}),t})();var b=a(7965),c=a(222),v=a(9287);const ao=["dt"];function lo(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"div",11),o.TgZ(2,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().FormularioUsuario(0)}),o._UZ(3,"i",13),o.qZA(),o.TgZ(4,"button",14),o.NdJ("click",function(){return o.CHM(e),o.oxw().FormularioUsuario(-1)}),o._UZ(5,"i",15),o.qZA(),o.TgZ(6,"button",16),o.NdJ("click",function(){return o.CHM(e),o.oxw().EliminarUsuario()}),o._UZ(7,"i",17),o.qZA(),o.qZA(),o.TgZ(8,"div",18),o.TgZ(9,"span",19),o._UZ(10,"i",20),o.TgZ(11,"input",21),o.NdJ("input",function(i){return o.CHM(e),o.oxw(),o.MAs(8).filterGlobal(i.target.value,"contains")}),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const e=o.oxw();o.xp6(2),o.Q6J("hidden",e.sesion),o.xp6(4),o.Q6J("hidden",e.sesion)}}function po(t,n){1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"th",22),o._uU(2,"Nro"),o._UZ(3,"p-sortIcon",23),o.qZA(),o.TgZ(4,"th",24),o._uU(5,"Usuario"),o._UZ(6,"p-sortIcon",25),o.qZA(),o.TgZ(7,"th",26),o._uU(8,"Correo"),o._UZ(9,"p-sortIcon",27),o.qZA(),o.TgZ(10,"th",28),o._uU(11,"Persona"),o._UZ(12,"p-sortIcon",29),o.qZA(),o.TgZ(13,"th",28),o._uU(14,"Proximo pago"),o._UZ(15,"p-sortIcon",29),o.qZA(),o.qZA())}function uo(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"tr",30),o.NdJ("click",function(){const p=o.CHM(e).$implicit;return o.oxw().SeleccionarUsuario(p)}),o.TgZ(1,"td",31),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"date"),o.qZA(),o.qZA()}if(2&t){const e=n.$implicit,r=n.rowIndex;o.xp6(2),o.Oqu(r+1),o.xp6(2),o.Oqu(e.usuario),o.xp6(2),o.Oqu(e.correo),o.xp6(2),o.Oqu(e.persona),o.xp6(2),o.Oqu(o.xi3(11,5,e.fecha_fin,"dd-MM-yyyy"))}}function co(t,n){1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td",32),o._uU(2,"No hay datos para mostrar "),o.qZA(),o.qZA())}const _o=function(){return["usuario","correo","persona"]};let mo=(()=>{class t{constructor(e,r,i){this.usuario_servicio=e,this.messageService=r,this.modalService=i,this.lista_usuarios=[],this.usuario_seleccionado=new Z.I,this.loading=!0,this.sesion=!1}ngOnInit(){this.sesion=JSON.parse(localStorage.getItem("accesos")||"{}").sesion,this.GetUsuarios()}GetUsuarios(){this.usuario_servicio.get_usuarios().subscribe(e=>{this.loading=!1,this.lista_usuarios=JSON.parse(JSON.stringify(e)).usuarios})}SeleccionarUsuario(e){this.BorrarToast(),this.usuario_seleccionado=e,this.messageService.add({severity:"info",summary:"Usuario seleccionado",detail:this.usuario_seleccionado.usuario.toString()})}FormularioUsuario(e){var r,i;if(this.BorrarToast(),0==e){let p=new Z.I;this.modalRef=this.modalService.show(C),this.modalRef.content.titulo="Nuevo usuario",this.modalRef.content.persona=p,this.modalRef.content.CargarValores(),null===(r=this.modalRef.onHide)||void 0===r||r.subscribe(d=>{this.GetUsuarios()})}else 0==this.usuario_seleccionado.id_usuario?this.messageService.add({severity:"warn",summary:"Alerta",detail:"Seleccione un usuario para editar"}):(this.modalRef=this.modalService.show(C),this.modalRef.content.titulo="Editar usuario",this.modalRef.content.usuario=this.usuario_seleccionado,this.modalRef.content.CargarValores(),null===(i=this.modalRef.onHide)||void 0===i||i.subscribe(p=>{this.GetUsuarios()}))}EliminarUsuario(){this.BorrarToast(),this.usuario_seleccionado.id_usuario?l().fire({title:"\xbfEsta segur@?",text:"No podra revertir esta acci\xf3n!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"SI, Eliminar!",cancelButtonText:"Cancelar"}).then(e=>{}):this.messageService.add({severity:"warn",summary:"Alerta",detail:"Seleccione un usuario para eliminar"})}BorrarToast(){this.messageService.clear()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(q.i),o.Y36(u.ez),o.Y36(_.tT))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-lista-usuario"]],viewQuery:function(e,r){if(1&e&&o.Gf(ao,5),2&e){let i;o.iGM(i=o.CRH())&&(r.table=i.first)}},features:[o._Bn([u.ez])],decls:13,vars:9,consts:[[1,"fondo_componente",2,"padding","20px","box-shadow","0 2px 0px 0 rgb(0 0 0 / 12%), inset 0 -1px 0 0 #dadce0"],[2,"padding","50px"],[1,"row"],[1,"col-lg-12"],[1,"tarjeta-titulo"],["dataKey","id_rol","styleClass","p-datatable-lista_usuarios",3,"value","rows","loading","paginator","filterDelay","responsive","globalFilterFields","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col-lg-6",2,"padding","0px","margin","0px"],["pTooltip","Nuevo","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"pi","pi-file-o","imgzoom",2,"color","#3699FF"],["pTooltip","Editar","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"click"],[1,"far","fa-edit","imgzoom",2,"color","#3CA934"],["pTooltip","Eliminar","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"far","fa-trash-alt","bg","imgzoom",2,"color","#F64E60"],[1,"col-lg-6","d-flex","justify-content-end"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar",2,"border-radius","15px","height","100%","height","100%",3,"input"],["pSortableColumn","id_usuario"],["field","id_usuario"],["pSortableColumn","usuario"],["field","usuario"],["pSortableColumn","correo"],["field","correo"],["pSortableColumn","persona"],["field","persona"],[3,"click"],["scope","persw"],["colspan","6"]],template:function(e,r){1&e&&(o._UZ(0,"p-toast"),o.TgZ(1,"div",0),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"p",4),o._uU(6," Lista de usuarios "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"p-table",5,6),o.YNc(9,lo,12,2,"ng-template",7),o.YNc(10,po,16,0,"ng-template",8),o.YNc(11,uo,12,8,"ng-template",9),o.YNc(12,co,3,0,"ng-template",10),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(7),o.Q6J("value",r.lista_usuarios)("rows",10)("loading",r.loading)("paginator",!0)("filterDelay",0)("responsive",!0)("globalFilterFields",o.DdM(8,_o))("rowHover",!0))},directives:[b.FN,c.iA,u.jx,v.u,f.o,c.lQ,c.fz],pipes:[g.uU],styles:[""]}),t})();var N=a(2340),I=a(1841);let J=(()=>{class t{constructor(e){this.http=e,this.baseURL="",this.token="",this.headers_token={}}actualizar_accesos(){this.baseURL=N.N.apiUrl+"/persona/",this.token=JSON.parse(localStorage.getItem("accesos")||"{}").access_token,this.headers_token={headers:{"content-type":"aplication/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+this.token}}}get_personas(){return this.actualizar_accesos(),this.http.get(this.baseURL+"lista_persona",this.headers_token)}post_personas(e){this.actualizar_accesos();const r=JSON.stringify(e);return this.http.post(this.baseURL+"post_persona",r,this.headers_token)}eliminar_personas(e){return this.actualizar_accesos(),this.http.get(this.baseURL+"eliminar_persona/"+e,this.headers_token)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(I.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fo(t,n){1&t&&(o.TgZ(0,"span",20),o._uU(1,"*"),o.qZA())}function go(t,n){1&t&&(o.TgZ(0,"span",21),o._UZ(1,"i",22),o.qZA())}function ho(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xe1ximo caracteres permitidos 20 "),o.qZA())}function Zo(t,n){1&t&&(o.TgZ(0,"span",20),o._uU(1,"*"),o.qZA())}function To(t,n){1&t&&(o.TgZ(0,"span",21),o._UZ(1,"i",22),o.qZA())}function xo(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xe1ximo caracteres permitidos 20 "),o.qZA())}function bo(t,n){1&t&&(o.TgZ(0,"span",20),o._uU(1,"*"),o.qZA())}function vo(t,n){1&t&&(o.TgZ(0,"span",21),o._UZ(1,"i",22),o.qZA())}function Uo(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xe1ximo caracteres permitidos 20 "),o.qZA())}function Ao(t,n){1&t&&(o.TgZ(0,"span",20),o._uU(1,"*"),o.qZA())}function qo(t,n){1&t&&(o.TgZ(0,"span",21),o._UZ(1,"i",22),o.qZA())}function Co(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xe1ximo caracteres permitidos 10 "),o.qZA())}function No(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xednimo caracteres permitidos 8 "),o.qZA())}function Io(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," Solo se permite n\xfameros "),o.qZA())}function Jo(t,n){1&t&&(o.TgZ(0,"span",20),o._uU(1,"*"),o.qZA())}function yo(t,n){1&t&&(o.TgZ(0,"span",21),o._UZ(1,"i",22),o.qZA())}function Mo(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xe1ximo caracteres permitidos 10 "),o.qZA())}function So(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," Solo se permite n\xfameros "),o.qZA())}function wo(t,n){1&t&&(o.TgZ(0,"span",20),o._uU(1,"*"),o.qZA())}function Ro(t,n){1&t&&(o.TgZ(0,"span",21),o._UZ(1,"i",22),o.qZA())}function ko(t,n){1&t&&(o.TgZ(0,"span",23),o._uU(1," M\xe1ximo caracteres permitidos 15 "),o.qZA())}let y=(()=>{class t{constructor(e,r){this.bsModalRef=e,this.persona_servicio=r,this.titulo="",this.persona=new m.x}ngOnInit(){this.IniciarFormulario()}IniciarFormulario(){this.form_persona=new s.cw({nombre:new s.NI(this.persona.nombre,[s.kI.required,s.kI.maxLength(20)]),apellido_paterno:new s.NI(this.persona.apellido_paterno,[s.kI.required,s.kI.maxLength(20)]),apellido_materno:new s.NI(this.persona.apellido_materno,[s.kI.required,s.kI.maxLength(20)]),celular:new s.NI(this.persona.celular,[s.kI.required,s.kI.minLength(8),s.kI.maxLength(8),s.kI.pattern(/^-?(0|[1-9]\d*)?$/)]),telefono:new s.NI(this.persona.telefono,[s.kI.maxLength(10),s.kI.pattern(/^-?(0|[1-9]\d*)?$/)]),ci:new s.NI(this.persona.ci,[s.kI.required,s.kI.maxLength(15)])})}GuardarPersona(){this.loading("Guardando datos");let e=new m.x;e.nombre=this.form_persona.value.nombre.trim(),e.apellido_paterno=this.form_persona.value.apellido_paterno.trim(),e.apellido_materno=this.form_persona.value.apellido_materno.trim(),e.ci=this.form_persona.value.ci.trim(),e.celular=this.form_persona.value.celular.trim(),e.telefono=this.form_persona.value.telefono,e.id_persona=this.persona.id_persona,this.persona_servicio.post_personas(e).subscribe(r=>{this.closeLoading(),JSON.parse(JSON.stringify(r)).mensaje[0]?this.error("Error!!",JSON.parse(JSON.stringify(r)).mensaje[0]):this.bsModalRef.hide()},r=>{this.closeLoading(),this.error("Error","Verifique su conexion a internet"),console.log(r)})}loading(e){l().fire({title:e,html:"Cargando",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}})}closeLoading(){l().close()}error(e,r){l().fire({icon:"error",title:e,text:r,didClose:()=>{}})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(_.UZ),o.Y36(J))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-modal-persona"]],inputs:{titulo:"titulo",persona:"persona"},decls:56,vars:24,consts:[[1,"modal-header",2,"border-top","4px solid #007bff !important"],[1,"modal-title","pull-left"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger","p-button-outlined",3,"click"],[3,"formGroup","submit"],[1,"modal-body",2,"padding","20px 40px 20px 40px"],[1,"row"],[2,"margin","0px","padding","0px"],["style","color: red;",4,"ngIf"],["style","color: green;",4,"ngIf"],["type","text","pInputText","","formControlName","nombre"],["class"," form-error text-danger small",4,"ngIf"],["type","text","pInputText","","formControlName","apellido_paterno"],["type","text","pInputText","","formControlName","apellido_materno"],["type","text","pInputText","","formControlName","celular"],["type","text","pInputText","","formControlName","telefono"],["type","text","pInputText","","formControlName","ci"],[1,"modal-footer"],[2,"padding-left","2px"],["pButton","","pRipple","","type","submit","label","Guardar",1,"p-button-raised",3,"disabled"],["pButton","","pRipple","","type","button","label","Cancelar",1,"p-button-raised","p-button-danger",3,"click"],[2,"color","red"],[2,"color","green"],[1,"fas","fa-check",2,"width","10px"],[1,"form-error","text-danger","small"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h4",1),o._uU(2),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return r.bsModalRef.hide()}),o.qZA(),o.qZA(),o.TgZ(4,"form",3),o.NdJ("submit",function(){return r.GuardarPersona()}),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"label",6),o.YNc(8,fo,2,0,"span",7),o.YNc(9,go,2,0,"span",8),o._uU(10," Nombre "),o.qZA(),o._UZ(11,"input",9),o.YNc(12,ho,2,0,"span",10),o.qZA(),o.TgZ(13,"div",5),o.TgZ(14,"label",6),o.YNc(15,Zo,2,0,"span",7),o.YNc(16,To,2,0,"span",8),o._uU(17," Apellido paterno "),o.qZA(),o._UZ(18,"input",11),o.YNc(19,xo,2,0,"span",10),o.qZA(),o.TgZ(20,"div",5),o.TgZ(21,"label",6),o.YNc(22,bo,2,0,"span",7),o.YNc(23,vo,2,0,"span",8),o._uU(24," Apellido materno "),o.qZA(),o._UZ(25,"input",12),o.YNc(26,Uo,2,0,"span",10),o.qZA(),o.TgZ(27,"div",5),o.TgZ(28,"label",6),o.YNc(29,Ao,2,0,"span",7),o.YNc(30,qo,2,0,"span",8),o._uU(31," Celular "),o.qZA(),o._UZ(32,"input",13),o.YNc(33,Co,2,0,"span",10),o.YNc(34,No,2,0,"span",10),o.YNc(35,Io,2,0,"span",10),o.qZA(),o.TgZ(36,"div",5),o.TgZ(37,"label",6),o.YNc(38,Jo,2,0,"span",7),o.YNc(39,yo,2,0,"span",8),o._uU(40," Telefono "),o.qZA(),o._UZ(41,"input",14),o.YNc(42,Mo,2,0,"span",10),o.YNc(43,So,2,0,"span",10),o.qZA(),o.TgZ(44,"div",5),o.TgZ(45,"label",6),o.YNc(46,wo,2,0,"span",7),o.YNc(47,Ro,2,0,"span",8),o._uU(48," C.I. "),o.qZA(),o._UZ(49,"input",15),o.YNc(50,ko,2,0,"span",10),o.qZA(),o.qZA(),o.TgZ(51,"div",16),o.TgZ(52,"div",17),o._UZ(53,"button",18),o.qZA(),o.TgZ(54,"div"),o.TgZ(55,"button",19),o.NdJ("click",function(){return r.bsModalRef.hide()}),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Oqu(r.titulo),o.xp6(2),o.Q6J("formGroup",r.form_persona),o.xp6(4),o.Q6J("ngIf",r.form_persona.controls.nombre.errors),o.xp6(1),o.Q6J("ngIf",!r.form_persona.controls.nombre.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_persona.controls.nombre.errors?null:r.form_persona.controls.nombre.errors.maxlength),o.xp6(3),o.Q6J("ngIf",r.form_persona.controls.apellido_paterno.errors),o.xp6(1),o.Q6J("ngIf",!r.form_persona.controls.apellido_paterno.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_persona.controls.apellido_paterno.errors?null:r.form_persona.controls.apellido_paterno.errors.maxlength),o.xp6(3),o.Q6J("ngIf",r.form_persona.controls.apellido_materno.errors),o.xp6(1),o.Q6J("ngIf",!r.form_persona.controls.apellido_materno.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_persona.controls.apellido_materno.errors?null:r.form_persona.controls.apellido_materno.errors.maxlength),o.xp6(3),o.Q6J("ngIf",r.form_persona.controls.celular.errors),o.xp6(1),o.Q6J("ngIf",!r.form_persona.controls.celular.errors),o.xp6(3),o.Q6J("ngIf",r.form_persona.controls.celular.hasError("maxlength")),o.xp6(1),o.Q6J("ngIf",r.form_persona.controls.celular.hasError("minLength")),o.xp6(1),o.Q6J("ngIf",null==r.form_persona.controls.celular.errors?null:r.form_persona.controls.celular.errors.pattern),o.xp6(3),o.Q6J("ngIf",r.form_persona.controls.telefono.errors),o.xp6(1),o.Q6J("ngIf",!r.form_persona.controls.telefono.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_persona.controls.telefono.errors?null:r.form_persona.controls.telefono.errors.maxlength),o.xp6(1),o.Q6J("ngIf",null==r.form_persona.controls.telefono.errors?null:r.form_persona.controls.telefono.errors.pattern),o.xp6(3),o.Q6J("ngIf",r.form_persona.controls.ci.errors),o.xp6(1),o.Q6J("ngIf",!r.form_persona.controls.ci.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_persona.controls.ci.errors?null:r.form_persona.controls.ci.errors.maxlength),o.xp6(3),o.Q6J("disabled",r.form_persona.invalid))},directives:[T.Hq,x.H,s._Y,s.JL,s.sg,g.O5,s.Fj,f.o,s.JJ,s.u],styles:[""]}),t})();const Lo=["dt"];function Oo(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"div",11),o.TgZ(2,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().FormularioPersona(0)}),o._UZ(3,"i",13),o.qZA(),o.TgZ(4,"button",14),o.NdJ("click",function(){return o.CHM(e),o.oxw().FormularioPersona(-1)}),o._UZ(5,"i",15),o.qZA(),o.TgZ(6,"button",16),o.NdJ("click",function(){return o.CHM(e),o.oxw().EliminarPersona()}),o._UZ(7,"i",17),o.qZA(),o.qZA(),o.TgZ(8,"div",18),o.TgZ(9,"span",19),o._UZ(10,"i",20),o.TgZ(11,"input",21),o.NdJ("input",function(i){return o.CHM(e),o.oxw(),o.MAs(8).filterGlobal(i.target.value,"contains")}),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const e=o.oxw();o.xp6(2),o.Q6J("hidden",e.sesion),o.xp6(4),o.Q6J("hidden",e.sesion)}}function Yo(t,n){1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"th"),o._uU(2,"Nro"),o.qZA(),o.TgZ(3,"th",22),o._uU(4,"Nombre"),o._UZ(5,"p-sortIcon",23),o.qZA(),o.TgZ(6,"th",24),o._uU(7,"Ap. paterno"),o._UZ(8,"p-sortIcon",25),o.qZA(),o.TgZ(9,"th",26),o._uU(10,"Ap. materno"),o._UZ(11,"p-sortIcon",27),o.qZA(),o.TgZ(12,"th",26),o._uU(13,"CI"),o._UZ(14,"p-sortIcon",27),o.qZA(),o.TgZ(15,"th",26),o._uU(16,"Celular"),o._UZ(17,"p-sortIcon",27),o.qZA(),o.TgZ(18,"th",26),o._uU(19,"Telefono"),o._UZ(20,"p-sortIcon",27),o.qZA(),o.qZA())}function Qo(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"tr",28),o.NdJ("click",function(){const p=o.CHM(e).$implicit;return o.oxw().SeleccionarPersona(p)}),o.TgZ(1,"td",29),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td"),o._uU(14),o.qZA(),o.qZA()}if(2&t){const e=n.$implicit,r=n.rowIndex;o.xp6(2),o.Oqu(r+1),o.xp6(2),o.Oqu(e.nombre),o.xp6(2),o.Oqu(e.apellido_paterno),o.xp6(2),o.Oqu(e.apellido_materno),o.xp6(2),o.Oqu(e.ci),o.xp6(2),o.Oqu(e.celular),o.xp6(2),o.Oqu(e.telefono)}}function Po(t,n){1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td",30),o._uU(2,"No hay datos para mostrar "),o.qZA(),o.qZA())}const Fo=function(){return["nombre","apellido_paterno","apellido_materno","celular","telefono","ci"]};let Eo=(()=>{class t{constructor(e,r,i){this.persona_servicio=e,this.messageService=r,this.modalService=i,this.lista_personas=[],this.persona_seleccionado=new m.x,this.loading=!0,this.sesion=!1}ngOnInit(){this.GetPersonas(),this.sesion=JSON.parse(localStorage.getItem("accesos")||"{}").sesion}GetPersonas(){this.persona_servicio.get_personas().subscribe(e=>{this.loading=!1,this.lista_personas=JSON.parse(JSON.stringify(e)).personas})}FormularioPersona(e){var r,i;if(this.BorrarToast(),0==e){let p=new m.x;this.modalRef=this.modalService.show(y),this.modalRef.content.titulo="Nuevo persona",this.modalRef.content.persona=p,null===(r=this.modalRef.onHide)||void 0===r||r.subscribe(d=>{this.GetPersonas()})}else 0==this.persona_seleccionado.id_persona?this.messageService.add({severity:"warn",summary:"Alerta",detail:"Seleccione una persona para editar"}):(this.modalRef=this.modalService.show(y),this.modalRef.content.titulo="Editar persona",this.modalRef.content.persona=this.persona_seleccionado,this.modalRef.content.IniciarFormulario(),null===(i=this.modalRef.onHide)||void 0===i||i.subscribe(p=>{this.GetPersonas()}))}EliminarPersona(){this.BorrarToast(),this.persona_seleccionado.id_persona?l().fire({title:"\xbfEsta segur@?",text:"No podra revertir esta acci\xf3n!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"SI, Eliminar!",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.loading_alert("Eliminando"),this.persona_servicio.eliminar_personas(this.persona_seleccionado.id_persona).subscribe(r=>{this.closeLoading_alert(),this.GetPersonas()}))}):this.messageService.add({severity:"warn",summary:"Alerta",detail:"Seleccione una personna para eliminar"})}SeleccionarPersona(e){this.BorrarToast(),this.persona_seleccionado=e,this.messageService.add({severity:"info",summary:"Persona seleccionado",detail:this.persona_seleccionado.nombre.toString()+" "+this.persona_seleccionado.apellido_paterno.toString()+" "+this.persona_seleccionado.apellido_materno.toString()})}BorrarToast(){this.messageService.clear()}loading_alert(e){l().fire({title:e,html:"Cargando",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}})}closeLoading_alert(){l().close()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(J),o.Y36(u.ez),o.Y36(_.tT))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-lista-persona"]],viewQuery:function(e,r){if(1&e&&o.Gf(Lo,5),2&e){let i;o.iGM(i=o.CRH())&&(r.table=i.first)}},features:[o._Bn([u.ez])],decls:13,vars:9,consts:[[1,"fondo_componente",2,"padding","20px","box-shadow","0 2px 0px 0 rgb(0 0 0 / 12%), inset 0 -1px 0 0 #dadce0"],[2,"padding","50px"],[1,"row"],[1,"col-lg-12"],[1,"tarjeta-titulo"],["dataKey","id_rol","styleClass","p-datatable-lista_personas",3,"value","rows","loading","paginator","filterDelay","responsive","globalFilterFields","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col-lg-6",2,"padding","0px","margin","0px"],["pTooltip","Nuevo","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"pi","pi-file-o","imgzoom",2,"color","#3699FF"],["pTooltip","Editar","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"click"],[1,"far","fa-edit","imgzoom",2,"color","#3CA934"],["pTooltip","Eliminar","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"far","fa-trash-alt","bg","imgzoom",2,"color","#F64E60"],[1,"col-lg-6","d-flex","justify-content-end"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar",2,"border-radius","15px","height","100%","height","100%",3,"input"],["pSortableColumn","usuario"],["field","nombre"],["pSortableColumn","correo"],["field","apellido_paterno"],["pSortableColumn","persona"],["field","apellido_materno"],[3,"click"],["scope","persw"],["colspan","6"]],template:function(e,r){1&e&&(o._UZ(0,"p-toast"),o.TgZ(1,"div",0),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"p",4),o._uU(6," Lista de personas "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"p-table",5,6),o.YNc(9,Oo,12,2,"ng-template",7),o.YNc(10,Yo,21,0,"ng-template",8),o.YNc(11,Qo,15,7,"ng-template",9),o.YNc(12,Po,3,0,"ng-template",10),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(7),o.Q6J("value",r.lista_personas)("rows",10)("loading",r.loading)("paginator",!0)("filterDelay",0)("responsive",!0)("globalFilterFields",o.DdM(8,Fo))("rowHover",!0))},directives:[b.FN,c.iA,u.jx,v.u,f.o,c.lQ,c.fz],styles:[""]}),t})();class h{constructor(){this.id_rol=0,this.nombre_rol="",this.fecha_reg="",this.fecha_mod=""}}let M=(()=>{class t{constructor(e){this.http=e,this.baseURL="",this.token="",this.headers_token={}}actualizar_accesos(){this.baseURL=N.N.apiUrl+"/rol/",this.token=JSON.parse(localStorage.getItem("accesos")||"{}").access_token,this.headers_token={headers:{"content-type":"aplication/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+this.token}}}get_roles(){return this.actualizar_accesos(),this.http.get(this.baseURL+"lista_rol",this.headers_token)}get_permisos(e){return this.actualizar_accesos(),this.http.get(this.baseURL+"get_rol/"+e,this.headers_token)}post_rol(e){this.actualizar_accesos();const r=JSON.stringify(e);return this.http.post(this.baseURL+"post_rol",r,this.headers_token)}eliminar_rol(e){return this.actualizar_accesos(),this.http.get(this.baseURL+"eliminar_rol/"+e,this.headers_token)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(I.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Bo=a(2396);function Go(t,n){1&t&&(o.TgZ(0,"span",16),o._uU(1,"*"),o.qZA())}function Ho(t,n){1&t&&(o.TgZ(0,"span",17),o._UZ(1,"i",18),o.qZA())}function zo(t,n){1&t&&(o.TgZ(0,"span",19),o._uU(1," M\xe1ximo caracteres permitidos 20 "),o.qZA())}let S=(()=>{class t{constructor(e,r){this.bsModalRef=e,this.rol_servicio=r,this.titulo="",this.rol=new h}ngOnInit(){this.IniciarFormulario(),this.CargarPermisos()}CargarPermisos(){this.loading(),this.rol_servicio.get_permisos(this.rol.id_rol).subscribe(e=>{this.close();let r=JSON.parse(JSON.stringify(e)).menu.original.replaceAll("expandedicon","expandedIcon");r=r.replaceAll("collapsedicon","collapsedIcon"),r=r.replaceAll("items","children"),r=r.replaceAll("ruta_menu_sidebar","routerLink"),this.files3=[JSON.parse(r)],this.selectedFiles2=JSON.parse(JSON.stringify(e)).permisos.original})}IniciarFormulario(){this.form_rol=new s.cw({nombre_rol:new s.NI(this.rol.nombre_rol,[s.kI.required,s.kI.maxLength(20)])})}GuardarRol(){this.loading();let e=new h;this.rol.id_arbol=this.nodos_seleccionados(this.selectedFiles2),e=this.rol,this.rol.nombre_rol=this.form_rol.value.nombre_rol.trim(),this.EnviarRol()}EnviarRol(){this.rol_servicio.post_rol(this.rol).subscribe(e=>{this.close(),0==JSON.parse(JSON.stringify(e)).mensaje.length?(this.bsModalRef.hide(),this.success()):this.error("Error",JSON.parse(JSON.stringify(e)).mensaje[0])},e=>{this.close(),console.log("ver error ",e)})}nodos_seleccionados(e){var r=new Array;for(var i in e)r.push(e[i].key),e[i].parent&&this.escalar_tree(e[i].parent,r);return this.quitar_duplicados(r).toString()}escalar_tree(e,r){r.push(e.key),e.parent&&this.escalar_tree(e.parent,r)}quitar_duplicados(e){return e.filter((i,p,d)=>p===d.indexOf(i))}error(e,r){l().fire({icon:"error",title:e,text:r})}success(){l().fire({position:"center",icon:"success",title:"Exito",showConfirmButton:!1,timer:1500})}loading(){l().fire({title:"Verificando datos",html:"Cargando",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}})}close(){l().close()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(_.UZ),o.Y36(M))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-modal-rol"]],inputs:{titulo:"titulo",rol:"rol"},features:[o._Bn([u.ez])],decls:22,vars:8,consts:[[1,"modal-header",2,"border-top","4px solid #007bff !important"],[1,"modal-title","pull-left"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger","p-button-outlined",3,"click"],[3,"formGroup","submit"],[1,"modal-body",2,"padding","20px 40px 20px 40px"],[1,"row"],[2,"margin","0px","padding","0px"],["style","color: red;",4,"ngIf"],["style","color: green;",4,"ngIf"],["type","text","pInputText","","formControlName","nombre_rol"],["class"," form-error text-danger small",4,"ngIf"],["selectionMode","checkbox",3,"value","selection","selectionChange"],[1,"modal-footer"],[2,"padding-left","2px"],["pButton","","pRipple","","type","submit","label","Guardar",1,"p-button-raised",3,"disabled"],["pButton","","pRipple","","type","button","label","Cancelar",1,"p-button-raised","p-button-danger",3,"click"],[2,"color","red"],[2,"color","green"],[1,"fas","fa-check",2,"width","10px"],[1,"form-error","text-danger","small"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h4",1),o._uU(2),o.qZA(),o.TgZ(3,"button",2),o.NdJ("click",function(){return r.bsModalRef.hide()}),o.qZA(),o.qZA(),o.TgZ(4,"form",3),o.NdJ("submit",function(){return r.GuardarRol()}),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"label",6),o.YNc(8,Go,2,0,"span",7),o.YNc(9,Ho,2,0,"span",8),o._uU(10," Nombre rol "),o.qZA(),o._UZ(11,"input",9),o.YNc(12,zo,2,0,"span",10),o.qZA(),o.TgZ(13,"div",5),o.TgZ(14,"label",6),o._uU(15,"Accesos"),o.qZA(),o.TgZ(16,"p-tree",11),o.NdJ("selectionChange",function(p){return r.selectedFiles2=p}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",12),o.TgZ(18,"div",13),o._UZ(19,"button",14),o.qZA(),o.TgZ(20,"div"),o.TgZ(21,"button",15),o.NdJ("click",function(){return r.bsModalRef.hide()}),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Oqu(r.titulo),o.xp6(2),o.Q6J("formGroup",r.form_rol),o.xp6(4),o.Q6J("ngIf",r.form_rol.controls.nombre_rol.errors),o.xp6(1),o.Q6J("ngIf",!r.form_rol.controls.nombre_rol.errors),o.xp6(3),o.Q6J("ngIf",null==r.form_rol.controls.nombre_rol.errors?null:r.form_rol.controls.nombre_rol.errors.maxlength),o.xp6(4),o.Q6J("value",r.files3)("selection",r.selectedFiles2),o.xp6(3),o.Q6J("disabled",r.form_rol.invalid))},directives:[T.Hq,x.H,s._Y,s.JL,s.sg,g.O5,s.Fj,f.o,s.JJ,s.u,Bo.mp],styles:[""]}),t})();const jo=["dt"];function Do(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"div",11),o.TgZ(2,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().FormularioRol(0)}),o._UZ(3,"i",13),o.qZA(),o.TgZ(4,"button",14),o.NdJ("click",function(){return o.CHM(e),o.oxw().FormularioRol(-1)}),o._UZ(5,"i",15),o.qZA(),o.TgZ(6,"button",16),o.NdJ("click",function(){return o.CHM(e),o.oxw().EliminarPersona()}),o._UZ(7,"i",17),o.qZA(),o.qZA(),o.TgZ(8,"div",18),o.TgZ(9,"span",19),o._UZ(10,"i",20),o.TgZ(11,"input",21),o.NdJ("input",function(i){return o.CHM(e),o.oxw(),o.MAs(8).filterGlobal(i.target.value,"contains")}),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const e=o.oxw();o.xp6(2),o.Q6J("hidden",e.sesion),o.xp6(2),o.Q6J("hidden",e.sesion),o.xp6(2),o.Q6J("hidden",e.sesion)}}function Xo(t,n){1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"th"),o._uU(2,"Nro"),o.qZA(),o.TgZ(3,"th",22),o._uU(4,"Rol"),o._UZ(5,"p-sortIcon",23),o.qZA(),o.TgZ(6,"th",24),o._uU(7,"Fecha reg"),o._UZ(8,"p-sortIcon",25),o.qZA(),o.TgZ(9,"th",26),o._uU(10,"Fecha mod"),o._UZ(11,"p-sortIcon",27),o.qZA(),o.qZA())}function Vo(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"tr",28),o.NdJ("click",function(){const p=o.CHM(e).$implicit;return o.oxw().SeleccionarRol(p)}),o.TgZ(1,"td",29),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.qZA()}if(2&t){const e=n.$implicit,r=n.rowIndex;o.xp6(2),o.Oqu(r+1),o.xp6(2),o.Oqu(e.nombre_rol),o.xp6(2),o.Oqu(e.fecha_reg),o.xp6(2),o.Oqu(e.fecha_mod)}}function $o(t,n){1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td",30),o._uU(2,"No hay datos para mostrar "),o.qZA(),o.qZA())}const Ko=function(){return["nombre_rol","fecha_reg","fecha_mod"]},Wo=[{path:"lista_usuario",component:mo},{path:"lista_persona",component:Eo},{path:"lista_rol",component:(()=>{class t{constructor(e,r,i){this.rol_servicio=e,this.messageService=r,this.modalService=i,this.lista_roles=[],this.loading=!0,this.sesion=!1,this.rol_seleccionado=new h}ngOnInit(){this.GetRoles(),this.sesion=JSON.parse(localStorage.getItem("accesos")||"{}").sesion}GetRoles(){this.rol_servicio.get_roles().subscribe(e=>{this.loading=!1,this.lista_roles=JSON.parse(JSON.stringify(e)).roles})}FormularioRol(e){var r,i;if(this.BorrarToast(),0==e){let p=new h;this.modalRef=this.modalService.show(S),this.modalRef.content.titulo="Nuevo rol",this.modalRef.content.persona=p,null===(r=this.modalRef.onHide)||void 0===r||r.subscribe(d=>{this.GetRoles()})}else 0==this.rol_seleccionado.id_rol?this.messageService.add({severity:"warn",summary:"Alerta",detail:"Seleccione un rol para editar"}):(this.modalRef=this.modalService.show(S),this.modalRef.content.titulo="Editar rol",this.modalRef.content.rol=this.rol_seleccionado,this.modalRef.content.IniciarFormulario(),this.modalRef.content.CargarPermisos(),null===(i=this.modalRef.onHide)||void 0===i||i.subscribe(p=>{this.GetRoles()}))}EliminarPersona(){this.BorrarToast(),this.rol_seleccionado.id_rol?l().fire({title:"\xbfEsta segur@?",text:"No podra revertir esta acci\xf3n!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"SI, Eliminar!",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.loading_alert(),this.rol_servicio.eliminar_rol(this.rol_seleccionado.id_rol).subscribe(r=>{this.closeLoading_alert(),this.GetRoles()}))}):this.messageService.add({severity:"warn",summary:"Alerta",detail:"Seleccione una persona para eliminar"})}SeleccionarRol(e){this.BorrarToast(),this.rol_seleccionado=e,this.messageService.add({severity:"info",summary:"Rol seleccionado",detail:this.rol_seleccionado.nombre_rol.toString()})}BorrarToast(){this.messageService.clear()}loading_alert(){l().fire({title:"Verificando datos",html:"Cargando",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}})}closeLoading_alert(){l().close()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(M),o.Y36(u.ez),o.Y36(_.tT))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-lista-rol"]],viewQuery:function(e,r){if(1&e&&o.Gf(jo,5),2&e){let i;o.iGM(i=o.CRH())&&(r.table=i.first)}},features:[o._Bn([u.ez])],decls:13,vars:9,consts:[[1,"fondo_componente",2,"padding","20px","box-shadow","0 2px 0px 0 rgb(0 0 0 / 12%), inset 0 -1px 0 0 #dadce0"],[2,"padding","50px"],[1,"row"],[1,"col-lg-12"],[1,"tarjeta-titulo"],["dataKey","id_rol","styleClass","p-datatable-lista_roles",3,"value","rows","loading","paginator","filterDelay","responsive","globalFilterFields","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col-lg-6",2,"padding","0px","margin","0px"],["pTooltip","Nuevo","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"pi","pi-file-o","imgzoom",2,"color","#3699FF"],["pTooltip","Editar","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"far","fa-edit","imgzoom",2,"color","#3CA934"],["pTooltip","Eliminar","tooltipPosition","top","type","button",1,"btn","IconoEfecto","transparente",3,"hidden","click"],[1,"far","fa-trash-alt","bg","imgzoom",2,"color","#F64E60"],[1,"col-lg-6","d-flex","justify-content-end"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar",2,"border-radius","15px","height","100%","height","100%",3,"input"],["pSortableColumn","usuario"],["field","nombre_rol"],["pSortableColumn","correo"],["field","fecha_reg"],["pSortableColumn","persona"],["field","fecha_mod"],[3,"click"],["scope","persw"],["colspan","6"]],template:function(e,r){1&e&&(o._UZ(0,"p-toast"),o.TgZ(1,"div",0),o.TgZ(2,"div",1),o.TgZ(3,"div",2),o.TgZ(4,"div",3),o.TgZ(5,"p",4),o._uU(6," Lista de roles "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"p-table",5,6),o.YNc(9,Do,12,3,"ng-template",7),o.YNc(10,Xo,12,0,"ng-template",8),o.YNc(11,Vo,9,4,"ng-template",9),o.YNc(12,$o,3,0,"ng-template",10),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(7),o.Q6J("value",r.lista_roles)("rows",10)("loading",r.loading)("paginator",!0)("filterDelay",0)("responsive",!0)("globalFilterFields",o.DdM(8,Ko))("rowHover",!0))},directives:[b.FN,c.iA,u.jx,v.u,f.o,c.lQ,c.fz],styles:[""]}),t})()},{path:"**",redirectTo:"/shared/slider",pathMatch:"full"}];let oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[A.Bz.forChild(Wo)],A.Bz]}),t})();var ee=a(3227);let te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[_.tT],imports:[[g.ez,oe,ee.W,_.zk.forRoot(),s.u5,s.UX]]}),t})()}}]);