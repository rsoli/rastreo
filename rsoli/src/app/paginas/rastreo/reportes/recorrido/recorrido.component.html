<p-toast ></p-toast>
<div class="fondo_componente" style="padding: 20px; box-shadow: 0 2px 0px 0 rgb(0 0 0 / 12%), inset 0 -1px 0 0 #dadce0; ">
    <div style="padding: 50px;">
        <div class="row" >
            <div class="col-lg-12">
                <p class="tarjeta-titulo"> Lista de rrecorridos </p>
            </div>
        </div>

        <p-table #dt [value]="lista_recorrido" dataKey="id_rol"
                [rows]="10" 
                [loading]="loading" 
                styleClass="p-datatable-lista_recorrido"
                [paginator]="true" 
                [filterDelay]="0" 
                [responsive]="true"
                [globalFilterFields]="['placa','address','speed','encendido','bateria_vehiculo','devicetime']"
                [rowHover]="true"
                >

                <ng-template pTemplate="caption">
                    <div class="row" >
                        <div class="col-lg-6" style="padding: 0px;margin: 0px;">
                            <button pTooltip="Filtros" tooltipPosition="top"  type="button" class="btn IconoEfecto transparente" (click)="MostrarFiltros()" >

                                <i style="color: #3699FF;" class="pi pi-filter imgzoom"></i>
                            </button> 
                        </div>
                        <div class="col-lg-6 d-flex justify-content-end">
                            <span class="p-input-icon-left">
                                <i class="pi pi-search"></i>
                                <input style="border-radius: 15px; height: 100%;height: 100%;"  pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Buscar" />
                            </span>    
                        </div>  
                    </div>
                </ng-template>

                <ng-template pTemplate="header" >
                    <tr>
                        <th>Nro</th>
                        <th pSortableColumn="placa">Placa<p-sortIcon field="placa"></p-sortIcon></th>
                        <th pSortableColumn="address">Ubicaci√≥n<p-sortIcon field="address"></p-sortIcon></th>
                        <th pSortableColumn="speed">Velocidad<p-sortIcon field="speed"></p-sortIcon></th>
                        <th pSortableColumn="encendido">Motor<p-sortIcon field="encendido"></p-sortIcon></th>
                        <th pSortableColumn="bateria_vehiculo">Bateria<p-sortIcon field="bateria_vehiculo"></p-sortIcon></th>
                        <th pSortableColumn="devicetime">Fecha<p-sortIcon field="devicetime"></p-sortIcon></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-lista_recorrido let-rowIndex="rowIndex" >
                    <tr  >
                        <td scope="persw">{{rowIndex+1}}</td>
                        <td>{{lista_recorrido.placa}}</td>
                        <td>{{lista_recorrido.address}}</td>
                        <td>{{lista_recorrido.speed | number}}</td>
                        <td>{{lista_recorrido.encendido}}</td>
                        <td>{{lista_recorrido.bateria_vehiculo | number}}</td>
                        <td>{{lista_recorrido.devicetime}}</td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="6">No hay datos para mostrar </td>
                    </tr>
                </ng-template>
        </p-table>
    </div>
</div>


<p-sidebar [(visible)]="visible_filtros" [style]="{width:'370px'}" [modal]="false">
    <h5>FILTROS</h5>
    <br>    
    <div  style="margin-top: 9px;">
            Vehiculo
            <br>
        <p-dropdown [options]="vehiculo" [(ngModel)]="vehiculo_seleccionado" optionLabel="placa" [filter]="true" filterBy="placa"
        [showClear]="true"  [autoDisplayFirst]="false" >
        <ng-template let-vehiculo pTemplate="item">
            <div class="country-item">
                <div style="border-bottom: 1px solid #dee2e6;">
                    <span style="font-weight: bold;" >Placa : </span> {{vehiculo.placa}} <br/>
                    <!-- <span style="font-weight: bold;" >Ap. paterno : </span> {{vehiculo.apellido_paterno}} <br/> -->
                </div>
            </div>
        </ng-template>
    </p-dropdown>
    </div>
    <div style="margin-top: 10px;">
            Fecha
            <br>
            <p-calendar  [(ngModel)]="fecha_ratreo" dateFormat="dd/mm/yy" inputId="spanish"></p-calendar>
    </div>
    <div style="margin-top: 10px;">
            Hora inicio
            <br>
            <p-calendar  [(ngModel)]="hora_inicio" [timeOnly]="true" inputId="timeonly"></p-calendar>
    </div>
    
    <div style="margin-top: 10px;">
            Hora fin
            <br>
            <p-calendar [(ngModel)]="hora_fin" [timeOnly]="true" inputId="timeonly"></p-calendar>
    </div>
    <br>
    <button pButton pRipple type="button" (click)="CargarRecorrido()" label="Aplicar filtros" class="p-button-raised"></button>
</p-sidebar>
