"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[1305],{2282:(P,u,s)=>{s.r(u),s.d(u,{ClientePagoModule:()=>y});var v=s(6895),n=s(7046),c=s(805);let p=(()=>{class t{constructor(){this.id_pago_servicio=0,this.tipo_servicio="",this.id_servicio=0,this.fecha_inicio="",this.fecha_fin="",this.fecha_pago="",this.precio_mensual=0,this.cantidad_vehiculos=0,this.cantidad_meses=0,this.sub_total=0,this.apellido_materno="",this.apellido_paterno="",this.celular="",this.ci="",this.id_cliente=0,this.mes_pagado="",this.nombre=""}static initialize(e,i){this.ComboServicio(e,i)}static ComboServicio(e,i){e.getAll("servicio/lista_pago_servicio_cliente/"+i).subscribe({next:o=>{const F=(o.lista_pago_seleccionado||[]).map(d=>({label:d.tipo_servicio,value:d.id_servicio})),m=t.columns.find(d=>"id_servicio"===d.field);m&&(m.options=F)},error:o=>{console.error("Error cargando opciones de tipo de servicio",o)}})}}return t.columns=[{field:"id_pago_servicio",header:"ID",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1,primaryKey:!0},{field:"tipo_servicio",header:"Tipo servicio",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"id_servicio",header:"Servicios",visibleTable:!1,visibleForm:!0,inputType:"select",required:!0,options:[],multiple:!1},{field:"fecha_pago",header:"Fecha pago",visibleTable:!0,visibleForm:!0,inputType:"date",required:!0},{field:"fecha_inicio",header:"Fecha inicio",visibleTable:!0,visibleForm:!0,inputType:"date",required:!0},{field:"fecha_fin",header:"Fecha fin",visibleTable:!0,visibleForm:!0,inputType:"date",required:!0},{field:"mes_pagado",header:"Mes pagado",visibleTable:!0,visibleForm:!1,inputType:"text",required:!1},{field:"precio_mensual",header:"Precio mensual",visibleTable:!0,visibleForm:!0,inputType:"number",required:!0},{field:"cantidad_vehiculos",header:"Cantidad dispositivos",visibleTable:!0,visibleForm:!0,inputType:"number",required:!0},{field:"cantidad_meses",header:"Cantidad meses",visibleTable:!0,visibleForm:!0,inputType:"number",required:!0},{field:"sub_total",header:"Subtotal",visibleTable:!0,visibleForm:!0,inputType:"number",required:!0},{field:"apellido_materno",header:"Apellido materno",visibleTable:!1,visibleForm:!1,inputType:"text",required:!1},{field:"apellido_paterno",header:"Apellido paterno",visibleTable:!1,visibleForm:!1,inputType:"text",required:!1},{field:"celular",header:"Celular",visibleTable:!1,visibleForm:!1,inputType:"text",required:!1},{field:"ci",header:"CI",visibleTable:!1,visibleForm:!1,inputType:"text",required:!1},{field:"id_cliente",header:"ID Cliente",visibleTable:!1,visibleForm:!1,inputType:"number",required:!1},{field:"nombre",header:"Nombre",visibleTable:!1,visibleForm:!1,inputType:"text",required:!1}],t})();var a=s(1571),b=s(6253),f=s(3617),h=s(2453),g=s(1023);const _=[{path:"",component:(()=>{class t{constructor(e,i,o,r){this.messageService=e,this.apiService=i,this.route=o,this.router=r,this.lista_pagos=[],this.loading=!1,this.columnas_pago=p.columns,this.toolbarButtons=new Array,this.id_cliente=0}ngOnInit(){this.AgregarBotones(),this.route.paramMap.subscribe(e=>{this.id_cliente=Number(e.get("id_cliente")),this.ListaPagos()}),p.initialize(this.apiService,this.id_cliente)}ListaPagos(){this.loading=!0,this.apiService.getAll("servicio/lista_pagos_cliente/"+this.id_cliente).subscribe({next:e=>{this.lista_pagos=JSON.parse(JSON.stringify(e)).lista_pagos_cliente},error:e=>{console.log(e)},complete:()=>{this.loading=!1}})}guardarClientePago(e){this.loading=!0,e.id_cliente=this.id_cliente,this.apiService.create("servicio/post_pagos_cliente",e).subscribe({next:i=>{var o;const r=null===(o=i?.mensaje)||void 0===o?void 0:o[0];r?this.MensajeError(r):this.ListaPagos()},error:i=>{this.MensajeError("Verifique su conexi\xf3n a internet"),console.log(i)},complete:()=>{this.loading=!1}})}eliminarClientePago(e){e.id_pago_servicio&&(this.loading=!0,this.apiService.delete("servicio/eliminar_pagos_cliente",e.id_pago_servicio).subscribe({next:()=>{this.ListaPagos()},error:i=>{console.log("Error al eliminar:",i),this.MensajeError("Error al eliminar")},complete:()=>{this.loading=!1}}))}AgregarBotones(){this.toolbarButtons.push({name:"btnAtras",label:"Volver",action:"volveratras",icon:"pi pi-arrow-left",disabled:!0,class:"p-button-rounded p-button-info"}),this.ButtonEnabled("btnAtras",!1)}ButtonClick(e){const{action:i}=e;"volveratras"===i?this.router.navigate(["/rastreo/lista_cliente"]):"onPruba2"===i||console.error("Accion no soportada")}MensajeError(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}MensajeSucces(e){this.messageService.add({severity:"success",summary:"Exito",detail:e})}MensajeInfo(e,i){this.messageService.add(1==i?{severity:"info",summary:"Seleccionado",detail:e}:{severity:"info",summary:"Informaci\xf3n",detail:e})}MensajeAdvertencia(e){this.messageService.add({severity:"error",summary:"Error",detail:e})}ButtonEnabled(e,i){this.toolbarButtons.forEach(o=>{o.name===e&&(o.disabled=i)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c.ez),a.Y36(b.s),a.Y36(n.gz),a.Y36(n.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-cliente-pago"]],features:[a._Bn([c.ez])],decls:4,vars:7,consts:[[1,"card"],[3,"loading"],["titleTable","Lista de pagos",3,"filterTable","paginator","toolbar","data","columns","buttons","formSave","delete","buttonClick"]],template:function(e,i){1&e&&(a.TgZ(0,"div",0),a._UZ(1,"p-toast")(2,"app-loading",1),a.TgZ(3,"app-tabla-dinamica",2),a.NdJ("formSave",function(r){return i.guardarClientePago(r)})("delete",function(r){return i.eliminarClientePago(r)})("buttonClick",function(r){return i.ButtonClick(r)}),a.qZA()()),2&e&&(a.xp6(2),a.Q6J("loading",i.loading),a.xp6(1),a.Q6J("filterTable",!0)("paginator",!0)("toolbar",!0)("data",i.lista_pagos)("columns",i.columnas_pago)("buttons",i.toolbarButtons))},dependencies:[f.N,h.FN,g.C]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[n.Bz.forChild(_),n.Bz]}),t})();var T=s(1511);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[v.ez,C,T.m]}),t})()}}]);