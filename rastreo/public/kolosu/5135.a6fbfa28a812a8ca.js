"use strict";(self.webpackChunkkolosu=self.webpackChunkkolosu||[]).push([[5135],{5135:(oo,v,e)=>{e.r(v),e.d(v,{LoginModule:()=>k});var x=e(6895),p=e(7046),d=e(805),i=e(433),L=e(740),Z=e(4986),I=e(1165),S=e(4482),w=e(8421),J=e(3888),F=e(5403),U=e(9672);const j=(0,J.d)(n=>function(r=null){n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r});function E(n){throw new j(n)}var N=e(262),z=e(8746),P=e(9646),o=e(1571),Y=e(8568),A=e(3975),C=e(5593),y=e(1740),M=e(3425),B=e(7772),Q=e(1795),R=e(7932);const D=function(){return{width:"50px",height:"50px"}};function G(n,s){1&n&&(o.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),o._UZ(4,"p-progressSpinner",20),o.qZA(),o.TgZ(5,"div",21),o._uU(6,"Cargando"),o.qZA()()()()),2&n&&(o.xp6(4),o.Akn(o.DdM(2,D)))}function H(n,s){1&n&&(o.TgZ(0,"span"),o._uU(1," M\xe1ximo caracteres permitidos 40 "),o.qZA())}function X(n,s){1&n&&(o.TgZ(0,"span"),o._uU(1," M\xe1ximo caracteres permitidos 40 "),o.qZA())}let V=(()=>{class n{constructor(r,t,a,u,c){this.layoutService=r,this.messageService=t,this.primengConfig=a,this.router=u,this.usuario_servicio=c,this.msgs1=[],this.loading=!1}ngOnInit(){this.iniciarFormulario(),this.primengConfig.ripple=!0}iniciarFormulario(){this.form=new i.cw({usuario:new i.NI("",[i.kI.required,i.kI.maxLength(40)]),password:new i.NI("",[i.kI.required,i.kI.maxLength(40)])})}IniciarSesion(){if(this.form.invalid)return void this.mostrarMensaje("error","Error","Por favor, complete todos los campos.");this.loading=!0;const r=new L.I;r.email=this.form.value.usuario.trim(),r.password=this.form.value.password.trim(),this.usuario_servicio.post_iniciar_sesion(r).pipe(function O(n,s){const{first:r,each:t,with:a=E,scheduler:u=s??Z.z,meta:c=null}=(0,I.q)(n)?{first:n}:"number"==typeof n?{each:n}:n;if(null==r&&null==t)throw new TypeError("No timeout provided.");return(0,S.e)((q,m)=>{let T,l,g=null,f=0;const b=h=>{l=(0,U.f)(m,u,()=>{try{T.unsubscribe(),(0,w.Xf)(a({meta:c,lastValue:g,seen:f})).subscribe(m)}catch(_){m.error(_)}},h)};T=q.subscribe((0,F.x)(m,h=>{l?.unsubscribe(),f++,m.next(g=h),t>0&&b(t)},void 0,void 0,()=>{l?.closed||l?.unsubscribe(),g=null})),!f&&b(null!=r?"number"==typeof r?r:+r-u.now():t)})}(5e3),(0,N.K)(t=>(this.mostrarMensaje("error","Error","Usuario o contrase\xf1a incorrecta"),(0,P.of)(null))),(0,z.x)(()=>this.loading=!1)).subscribe(t=>{t&&(localStorage.setItem("accesos",JSON.stringify(t)),this.form.reset(),this.router.navigateByUrl("/rastreo/monitoreo_vehiculo"))})}mostrarMensaje(r,t,a){this.msgs1=[{severity:r,summary:t,detail:a}]}}return n.\u0275fac=function(r){return new(r||n)(o.Y36(Y.P),o.Y36(d.ez),o.Y36(d.b4),o.Y36(p.F0),o.Y36(A.r))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],features:[o._Bn([d.ez])],decls:19,vars:11,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"surface-card","py-8","px-5","sm:px-8",2,"border-radius","53px"],[1,"mb-5","flex","flex-column","align-items-center","justify-content-center"],["alt","kolosu-logo",1,"mb-5","w-15rem","flex-shrink-0",3,"src"],[1,"text-900","text-2xl","font-medium"],[3,"value","enableService","valueChange"],[3,"formGroup","submit"],["class","flex flex-column align-items-center loading-indicator ",4,"ngIf"],[1,"flex","flex-column","align-items-center"],["formControlName","usuario","type","text","placeholder","Correo","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem"],[4,"ngIf"],["formControlName","password","placeholder","Contrase\xf1a","styleClass","w-full md:w-30rem mb-5","inputStyleClass","p-3",3,"toggleMask","feedback"],["pButton","","pRipple","","label","Iniciar sesi\xf3n","type","submit",1,"w-full","p-3","text-xl",3,"disabled"],["pButton","","pRipple","","type","button","label","Cancelar",1,"w-full","p-3","text-xl","p-button-secondary",3,"routerLink"],[1,"flex","flex-column","align-items-center","loading-indicator"],[1,"flex","flex-column","card-container","green-container"],[1,"loading-border"],[1,"flex","align-items-center","justify-content-center","h-4rem"],["styleClass","custom-spinner","strokeWidth","10","animationDuration",".5s"],[1,"loading-text","flex","align-items-center","justify-content-center","h-4rem"]],template:function(r,t){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"span",6),o._uU(7,"Inicia sesi\xf3n para continuar"),o.qZA()(),o.TgZ(8,"p-messages",7),o.NdJ("valueChange",function(u){return t.msgs1=u}),o.qZA(),o.TgZ(9,"form",8),o.NdJ("submit",function(){return t.IniciarSesion()}),o.YNc(10,G,7,3,"div",9),o.TgZ(11,"div",10),o._UZ(12,"input",11),o.YNc(13,H,2,0,"span",12),o._UZ(14,"p-password",13),o.YNc(15,X,2,0,"span",12),o._UZ(16,"button",14)(17,"br")(18,"button",15),o.qZA()()()()()()),2&r&&(o.xp6(5),o.MGl("src","assets/logos/","light"===t.layoutService.config.colorScheme?"logo-dark2":"logo-white2",".png",o.LSH),o.xp6(3),o.Q6J("value",t.msgs1)("enableService",!1),o.xp6(1),o.Q6J("formGroup",t.form),o.xp6(1),o.Q6J("ngIf",t.loading),o.xp6(3),o.Q6J("ngIf",null==t.form.controls.usuario.errors?null:t.form.controls.usuario.errors.maxlength),o.xp6(1),o.Q6J("toggleMask",!0)("feedback",!1),o.xp6(1),o.Q6J("ngIf",null==t.form.controls.password.errors?null:t.form.controls.password.errors.maxlength),o.xp6(1),o.Q6J("disabled",t.form.invalid),o.xp6(2),o.Q6J("routerLink","/"))},dependencies:[x.O5,p.rH,C.Hq,y.o,i._Y,i.Fj,i.JJ,i.JL,M.ro,B.V,Q.H,R.G,i.sg,i.u],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     input, [_nghost-%COMP%]     p-password input{font-size:16px;padding:1rem;width:100%;box-sizing:border-box;border:1px solid #ccc;border-radius:4px}[_nghost-%COMP%]     p-password{width:100%;max-width:30rem}[_nghost-%COMP%]     .p-password{display:flex;align-items:center}[_nghost-%COMP%]     .p-password .p-inputtext{flex-grow:1}[_nghost-%COMP%]     .p-password .p-password-icon{margin-left:-2rem;cursor:pointer}[_nghost-%COMP%]     .mb-5{margin-bottom:1.25rem}']}),n})(),W=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[p.Bz.forChild([{path:"",component:V}]),p.Bz]}),n})();var K=e(1989),$=e(6604);let k=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[x.ez,W,C.hJ,K.nD,y.j,i.u5,M.gz,$.W,i.UX]}),n})()}}]);